2025-02-10 21:35:44,313 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 21:35:47,749 - INFO - Updating schedule at 2025-02-10 21:35:47.746141+01:00
2025-02-10 21:35:47,750 - INFO - 
=== Current Schedule ===
2025-02-10 21:35:48,041 - INFO - 
=== New Periods for Tomorrow ===
2025-02-10 21:35:48,042 - INFO - Period 1: Charging on Tuesday at 01:00-02:00
2025-02-10 21:35:48,042 - INFO - Period 2: Charging on Tuesday at 02:00-03:00
2025-02-10 21:35:48,042 - INFO - Period 3: Charging on Tuesday at 03:00-04:00
2025-02-10 21:35:48,042 - INFO - Period 4: Charging on Tuesday at 04:00-05:00
2025-02-10 21:35:48,042 - INFO - Period 5: Discharging on Tuesday at 07:00-08:00
2025-02-10 21:35:48,042 - INFO - Period 6: Discharging on Tuesday at 08:00-09:00
2025-02-10 21:35:48,042 - INFO - Period 7: Discharging on Tuesday at 09:00-10:00
2025-02-10 21:35:48,042 - INFO - Period 8: Discharging on Tuesday at 10:00-11:00
2025-02-10 21:35:48,042 - INFO - 
=== Final Schedule ===
2025-02-10 21:35:48,042 - INFO - Period 1: Charging on Tuesday at 01:00-02:00
2025-02-10 21:35:48,042 - INFO - Period 2: Charging on Tuesday at 02:00-03:00
2025-02-10 21:35:48,042 - INFO - Period 3: Charging on Tuesday at 03:00-04:00
2025-02-10 21:35:48,042 - INFO - Period 4: Charging on Tuesday at 04:00-05:00
2025-02-10 21:35:48,042 - INFO - Period 5: Discharging on Tuesday at 07:00-08:00
2025-02-10 21:35:48,042 - INFO - Period 6: Discharging on Tuesday at 08:00-09:00
2025-02-10 21:35:48,042 - INFO - Period 7: Discharging on Tuesday at 09:00-10:00
2025-02-10 21:35:48,042 - INFO - Period 8: Discharging on Tuesday at 10:00-11:00
2025-02-10 21:35:48,042 - INFO - Successfully updated battery schedule
2025-02-10 21:35:48,042 - INFO - Schedule update completed successfully
2025-02-10 21:38:26,022 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 21:38:29,849 - INFO - Updating schedule at 2025-02-10 21:38:29.847725+01:00
2025-02-10 21:38:29,850 - INFO - 
=== Current Schedule ===
2025-02-10 21:38:30,000 - INFO - 
=== New Periods for Tomorrow ===
2025-02-10 21:38:30,000 - INFO - Period 1: Charging on Tuesday at 01:00-02:00
2025-02-10 21:38:30,000 - INFO - Period 2: Charging on Tuesday at 02:00-03:00
2025-02-10 21:38:30,000 - INFO - Period 3: Charging on Tuesday at 03:00-04:00
2025-02-10 21:38:30,000 - INFO - Period 4: Charging on Tuesday at 04:00-05:00
2025-02-10 21:38:30,000 - INFO - Period 5: Discharging on Tuesday at 07:00-08:00
2025-02-10 21:38:30,000 - INFO - Period 6: Discharging on Tuesday at 08:00-09:00
2025-02-10 21:38:30,000 - INFO - Period 7: Discharging on Tuesday at 09:00-10:00
2025-02-10 21:38:30,000 - INFO - Period 8: Discharging on Tuesday at 10:00-11:00
2025-02-10 21:38:30,000 - INFO - 
=== Final Schedule ===
2025-02-10 21:38:30,000 - INFO - Period 1: Charging on Tuesday at 01:00-02:00
2025-02-10 21:38:30,000 - INFO - Period 2: Charging on Tuesday at 02:00-03:00
2025-02-10 21:38:30,000 - INFO - Period 3: Charging on Tuesday at 03:00-04:00
2025-02-10 21:38:30,000 - INFO - Period 4: Charging on Tuesday at 04:00-05:00
2025-02-10 21:38:30,000 - INFO - Period 5: Discharging on Tuesday at 07:00-08:00
2025-02-10 21:38:30,001 - INFO - Period 6: Discharging on Tuesday at 08:00-09:00
2025-02-10 21:38:30,001 - INFO - Period 7: Discharging on Tuesday at 09:00-10:00
2025-02-10 21:38:30,001 - INFO - Period 8: Discharging on Tuesday at 10:00-11:00
2025-02-10 21:38:30,006 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 21:38:33,535 - INFO - Successfully wrote schedule to battery
2025-02-10 21:38:33,537 - INFO - Successfully updated battery schedule
2025-02-10 21:38:33,538 - INFO - Schedule update completed successfully
2025-02-10 21:55:07,142 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 21:55:10,558 - INFO - Updating schedule at 2025-02-10 21:55:10.556211+01:00
2025-02-10 21:55:10,558 - INFO - 
=== Current Schedule ===
2025-02-10 21:55:10,952 - INFO - 
=== New Periods for Tomorrow ===
2025-02-10 21:55:10,952 - INFO - Period 1: Charging on Tuesday at 01:00-05:00
2025-02-10 21:55:10,952 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-10 21:55:10,953 - INFO - 
=== Final Schedule ===
2025-02-10 21:55:10,953 - INFO - Period 1: Charging on Tuesday at 01:00-05:00
2025-02-10 21:55:10,953 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-10 21:55:10,953 - INFO - Successfully updated battery schedule
2025-02-10 21:55:10,953 - INFO - Schedule update completed successfully
2025-02-10 21:56:22,528 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 21:56:26,841 - INFO - Updating schedule at 2025-02-10 21:56:26.841245+01:00
2025-02-10 21:56:26,841 - INFO - 
=== Current Schedule ===
2025-02-10 21:56:26,980 - INFO - 
=== New Periods for Tomorrow ===
2025-02-10 21:56:26,981 - INFO - Period 1: Charging on Tuesday at 01:00-05:00
2025-02-10 21:56:26,981 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-10 21:56:26,981 - INFO - 
=== Final Schedule ===
2025-02-10 21:56:26,981 - INFO - Period 1: Charging on Tuesday at 01:00-05:00
2025-02-10 21:56:26,981 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-10 21:56:26,986 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 21:56:31,593 - INFO - Successfully wrote schedule to battery
2025-02-10 21:56:31,594 - INFO - Successfully updated battery schedule
2025-02-10 21:56:31,595 - INFO - Schedule update completed successfully
2025-02-10 22:49:38,027 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 22:49:41,438 - INFO - Updating schedule at 2025-02-10 22:49:41.436719+01:00
2025-02-10 22:49:41,440 - INFO - 
=== Current Schedule ===
2025-02-10 22:49:41,967 - INFO - Preserving today's schedule based on price comparison
2025-02-10 22:49:41,980 - INFO - 
=== New Periods for Tomorrow ===
2025-02-10 22:49:41,980 - INFO - Period 1: Charging on Tuesday at 00:00-01:00
2025-02-10 22:49:41,980 - INFO - Period 2: Charging on Tuesday at 02:00-05:00
2025-02-10 22:49:41,980 - INFO - Period 3: Discharging on Tuesday at 07:00-11:00
2025-02-10 22:49:41,980 - INFO - 
=== Final Schedule ===
2025-02-10 22:49:41,980 - INFO - Period 1: Charging on Tuesday at 00:00-01:00
2025-02-10 22:49:41,980 - INFO - Period 2: Charging on Tuesday at 02:00-05:00
2025-02-10 22:49:41,980 - INFO - Period 3: Discharging on Tuesday at 07:00-11:00
2025-02-10 22:49:41,980 - INFO - Successfully updated battery schedule
2025-02-10 22:49:41,980 - INFO - Schedule update completed successfully
2025-02-10 23:24:05,244 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 23:24:08,481 - INFO - Updating schedule at 2025-02-10 23:24:08.479978+01:00
2025-02-10 23:24:08,481 - INFO - 
=== Current Schedule ===
2025-02-10 23:24:08,807 - INFO - Preserving today's schedule based on price comparison
2025-02-10 23:24:08,821 - INFO - 
=== New Periods for Tomorrow ===
2025-02-10 23:24:08,821 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-10 23:24:08,821 - INFO - Period 2: Charging on Tuesday at 23:00-00:00
2025-02-10 23:24:08,821 - INFO - Period 3: Discharging on Tuesday at 07:00-11:00
2025-02-10 23:24:08,821 - INFO - 
=== Final Schedule ===
2025-02-10 23:24:08,821 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-10 23:24:08,821 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-10 23:24:08,821 - INFO - Period 3: Charging on Tuesday at 23:00-00:00
2025-02-10 23:24:08,822 - INFO - Successfully updated battery schedule
2025-02-10 23:24:08,822 - INFO - Schedule update completed successfully
2025-02-10 23:45:29,354 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 23:45:32,930 - INFO - Updating schedule at 2025-02-10 23:45:32.929532+01:00
2025-02-10 23:45:32,930 - INFO - 
=== Current Schedule ===
2025-02-10 23:45:33,309 - INFO - Preserving today's schedule based on price comparison
2025-02-10 23:45:33,320 - INFO - 
=== New Periods for Tomorrow ===
2025-02-10 23:45:33,320 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-10 23:45:33,321 - INFO - Period 2: Charging on Tuesday at 23:00-00:00
2025-02-10 23:45:33,321 - INFO - Period 3: Discharging on Tuesday at 07:00-11:00
2025-02-10 23:45:33,321 - INFO - 
=== Final Schedule ===
2025-02-10 23:45:33,321 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-10 23:45:33,321 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-10 23:45:33,321 - INFO - Period 3: Charging on Tuesday at 23:00-00:00
2025-02-10 23:45:33,321 - INFO - Successfully updated battery schedule
2025-02-10 23:45:33,321 - INFO - Schedule update completed successfully
2025-02-10 23:46:21,181 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 23:46:24,689 - INFO - Updating schedule at 2025-02-10 23:46:24.687984+01:00
2025-02-10 23:46:24,689 - INFO - 
=== Current Schedule ===
2025-02-10 23:46:24,907 - INFO - Preserving today's schedule based on price comparison
2025-02-10 23:46:24,917 - INFO - 
=== New Periods for Tomorrow ===
2025-02-10 23:46:24,917 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-10 23:46:24,917 - INFO - Period 2: Charging on Tuesday at 23:00-00:00
2025-02-10 23:46:24,917 - INFO - Period 3: Discharging on Tuesday at 07:00-11:00
2025-02-10 23:46:24,917 - INFO - 
=== Final Schedule ===
2025-02-10 23:46:24,917 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-10 23:46:24,917 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-10 23:46:24,917 - INFO - Period 3: Charging on Tuesday at 23:00-00:00
2025-02-10 23:46:24,925 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-10 23:46:28,621 - INFO - Successfully wrote schedule to battery
2025-02-10 23:46:28,622 - INFO - Successfully updated battery schedule
2025-02-10 23:46:28,623 - INFO - Schedule update completed successfully
2025-02-11 14:34:20,372 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 14:34:23,672 - INFO - Updating schedule at 2025-02-11 14:34:23.672600+01:00
2025-02-11 14:34:23,672 - INFO - 
=== Current Schedule ===
2025-02-11 14:34:23,673 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-11 14:34:23,673 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-11 14:34:23,673 - INFO - Period 3: Charging on Tuesday at 23:00-00:00
2025-02-11 14:34:23,855 - INFO - Preserving today's schedule based on price comparison
2025-02-11 14:34:23,861 - INFO - 
=== New Periods for Tomorrow ===
2025-02-11 14:34:23,862 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 14:34:23,862 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-11 14:34:23,863 - INFO - Period 3: Discharging on Wednesday at 18:00-19:00
2025-02-11 14:34:23,863 - INFO - 
=== Final Schedule ===
2025-02-11 14:34:23,863 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 14:34:23,864 - INFO - Period 2: Charging on Tuesday at 02:00-05:00
2025-02-11 14:34:23,864 - INFO - Period 3: Discharging on Tuesday at 07:00-11:00
2025-02-11 14:34:23,864 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 14:34:23,864 - INFO - Period 5: Charging on Tuesday at 23:00-00:00
2025-02-11 14:34:23,864 - INFO - Successfully updated battery schedule
2025-02-11 14:34:23,864 - INFO - Schedule update completed successfully
2025-02-11 14:36:28,389 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 14:36:32,153 - INFO - Updating schedule at 2025-02-11 14:36:32.153347+01:00
2025-02-11 14:36:32,155 - INFO - 
=== Current Schedule ===
2025-02-11 14:36:32,156 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-11 14:36:32,157 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-11 14:36:32,158 - INFO - Period 3: Charging on Tuesday at 23:00-00:00
2025-02-11 14:36:32,394 - INFO - Preserving today's schedule based on price comparison
2025-02-11 14:36:32,404 - INFO - 
=== New Periods for Tomorrow ===
2025-02-11 14:36:32,404 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 14:36:32,404 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-11 14:36:32,404 - INFO - Period 3: Discharging on Wednesday at 18:00-19:00
2025-02-11 14:36:32,404 - INFO - 
=== Final Schedule ===
2025-02-11 14:36:32,404 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 14:36:32,405 - INFO - Period 2: Charging on Tuesday at 02:00-05:00
2025-02-11 14:36:32,405 - INFO - Period 3: Discharging on Tuesday at 07:00-11:00
2025-02-11 14:36:32,405 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 14:36:32,405 - INFO - Period 5: Charging on Tuesday at 23:00-00:00
2025-02-11 14:36:32,405 - INFO - Successfully updated battery schedule
2025-02-11 14:36:32,405 - INFO - Schedule update completed successfully
2025-02-11 14:39:34,718 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 14:39:37,997 - INFO - Updating schedule at 2025-02-11 14:39:37.997782+01:00
2025-02-11 14:39:37,999 - INFO - 
=== Current Schedule ===
2025-02-11 14:39:38,000 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-11 14:39:38,002 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-11 14:39:38,003 - INFO - Period 3: Charging on Tuesday at 23:00-00:00
2025-02-11 14:39:38,206 - INFO - Preserving today's schedule based on price comparison
2025-02-11 14:39:38,210 - INFO - 
=== New Periods for Tomorrow ===
2025-02-11 14:39:38,210 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 14:39:38,210 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-11 14:39:38,210 - INFO - Period 3: Discharging on Wednesday at 18:00-19:00
2025-02-11 14:39:38,210 - INFO - 
=== Final Schedule ===
2025-02-11 14:39:38,211 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 14:39:38,211 - INFO - Period 2: Charging on Tuesday at 02:00-05:00
2025-02-11 14:39:38,211 - INFO - Period 3: Discharging on Tuesday at 07:00-11:00
2025-02-11 14:39:38,211 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 14:39:38,211 - INFO - Period 5: Charging on Tuesday at 23:00-00:00
2025-02-11 14:39:38,214 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 14:39:41,960 - INFO - Successfully wrote schedule to battery
2025-02-11 14:39:41,962 - INFO - Successfully updated battery schedule
2025-02-11 14:39:41,962 - INFO - Schedule update completed successfully
2025-02-11 16:15:29,930 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:15:33,073 - INFO - Updating schedule at 2025-02-11 16:15:33.073469+01:00
2025-02-11 16:15:33,074 - INFO - 
=== Current Schedule ===
2025-02-11 16:15:33,076 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-11 16:15:33,077 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-11 16:15:33,078 - INFO - Period 3: Charging on Tuesday at 23:00-00:00
2025-02-11 16:15:33,079 - ERROR - Unexpected error in schedule update: 'BatteryManager' object has no attribute 'get_soc'
2025-02-11 16:15:33,081 - ERROR - Schedule update failed
2025-02-11 16:22:36,200 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:22:39,788 - INFO - Updating schedule at 2025-02-11 16:22:39.788861+01:00
2025-02-11 16:22:39,791 - INFO - 
=== Current Schedule ===
2025-02-11 16:22:39,792 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-11 16:22:39,793 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-11 16:22:39,794 - INFO - Period 3: Charging on Tuesday at 23:00-00:00
2025-02-11 16:22:39,799 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:22:43,251 - INFO - Current battery SOC: 4.0%
2025-02-11 16:22:43,464 - INFO - Clearing current schedule due to low SOC: 4.0%
2025-02-11 16:22:43,479 - INFO - 
=== Final Schedule ===
2025-02-11 16:22:43,479 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 16:22:43,479 - INFO - Period 2: Charging on Wednesday at 01:00-03:00
2025-02-11 16:22:43,479 - INFO - Period 3: Discharging on Wednesday at 07:00-10:00
2025-02-11 16:22:43,480 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 16:22:43,480 - INFO - Period 5: Charging on Tuesday at 22:00-00:00
2025-02-11 16:22:43,480 - ERROR - Unexpected error in schedule update: name 'success' is not defined
2025-02-11 16:22:43,480 - ERROR - Schedule update failed
2025-02-11 16:27:53,544 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:27:56,748 - INFO - Updating schedule at 2025-02-11 16:27:56.748827+01:00
2025-02-11 16:27:56,749 - INFO - 
=== Current Schedule ===
2025-02-11 16:27:56,750 - INFO - Period 1: Charging on Tuesday at 02:00-05:00
2025-02-11 16:27:56,751 - INFO - Period 2: Discharging on Tuesday at 07:00-11:00
2025-02-11 16:27:56,751 - INFO - Period 3: Charging on Tuesday at 23:00-00:00
2025-02-11 16:27:56,776 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:28:00,466 - INFO - Current battery SOC: 4.0%
2025-02-11 16:28:00,701 - INFO - Clearing current schedule due to low SOC: 4.0%
2025-02-11 16:28:00,710 - INFO - 
=== Final Schedule ===
2025-02-11 16:28:00,710 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 16:28:00,711 - INFO - Period 2: Charging on Wednesday at 01:00-03:00
2025-02-11 16:28:00,711 - INFO - Period 3: Discharging on Wednesday at 07:00-10:00
2025-02-11 16:28:00,711 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 16:28:00,711 - INFO - Period 5: Charging on Tuesday at 22:00-00:00
2025-02-11 16:28:00,712 - ERROR - Unexpected error in schedule update: name 'success' is not defined
2025-02-11 16:28:00,712 - ERROR - Schedule update failed
2025-02-11 16:30:13,158 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:30:19,182 - ERROR - Exception response 131 / 0
2025-02-11 16:30:19,183 - ERROR - Error reading register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-11 16:30:19,185 - ERROR - Failed to read current schedule
2025-02-11 16:30:19,185 - ERROR - Schedule update failed
2025-02-11 16:32:15,508 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:32:19,608 - INFO - Updating schedule at 2025-02-11 16:32:19.608412+01:00
2025-02-11 16:32:19,609 - INFO - 
=== Current Schedule ===
2025-02-11 16:32:19,611 - INFO - Period 1: Charging on Tuesday at 23:00-00:00
2025-02-11 16:32:19,629 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:32:23,612 - INFO - Current battery SOC: 4.0%
2025-02-11 16:32:23,849 - INFO - Clearing current schedule due to low SOC: 4.0%
2025-02-11 16:32:23,855 - INFO - 
=== Final Schedule ===
2025-02-11 16:32:23,855 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 16:32:23,855 - INFO - Period 2: Charging on Wednesday at 01:00-03:00
2025-02-11 16:32:23,855 - INFO - Period 3: Discharging on Wednesday at 07:00-10:00
2025-02-11 16:32:23,856 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 16:32:23,856 - INFO - Period 5: Charging on Tuesday at 22:00-00:00
2025-02-11 16:32:23,856 - ERROR - Unexpected error in schedule update: name 'success' is not defined
2025-02-11 16:32:23,857 - ERROR - Schedule update failed
2025-02-11 16:37:14,025 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:37:17,812 - INFO - Updating schedule at 2025-02-11 16:37:17.812742+01:00
2025-02-11 16:37:17,813 - INFO - 
=== Current Schedule ===
2025-02-11 16:37:17,815 - INFO - Period 1: Charging on Tuesday at 23:00-00:00
2025-02-11 16:37:17,824 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 16:37:21,577 - INFO - Current battery SOC: 4.0%
2025-02-11 16:37:21,830 - INFO - Clearing current schedule due to low SOC: 4.0%
2025-02-11 16:37:21,839 - INFO - 
=== Final Schedule ===
2025-02-11 16:37:21,840 - INFO - Period 1: Charging on Wednesday at 00:00-04:00
2025-02-11 16:37:21,840 - INFO - Period 2: Charging on Wednesday at 01:00-03:00
2025-02-11 16:37:21,840 - INFO - Period 3: Discharging on Wednesday at 07:00-10:00
2025-02-11 16:37:21,840 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 16:37:21,841 - INFO - Period 5: Charging on Tuesday at 22:00-00:00
2025-02-11 16:37:21,841 - ERROR - Unexpected error in schedule update: name 'success' is not defined
2025-02-11 16:37:21,841 - ERROR - Schedule update failed
2025-02-11 17:14:03,302 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:14:06,498 - INFO - Current battery SOC: 4.0%
2025-02-11 17:14:06,507 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:14:10,299 - INFO - Updating schedule at 2025-02-11 17:14:10.299273+01:00 (Current SOC: 4.0%)
2025-02-11 17:14:10,301 - INFO - 
=== Current Schedule ===
2025-02-11 17:14:10,301 - INFO - Period 1: Charging on Tuesday at 23:00-00:00
2025-02-11 17:14:10,512 - INFO - Clearing current schedule due to low SOC (4.0%)
2025-02-11 17:14:10,517 - INFO - 
=== New Periods for Tomorrow ===
2025-02-11 17:14:10,517 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:14:10,517 - INFO - Period 2: Charging on Wednesday at 22:00-00:00
2025-02-11 17:14:10,524 - INFO - Period 3: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:14:10,524 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:14:10,524 - INFO - 
=== Final Schedule ===
2025-02-11 17:14:10,524 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:14:10,525 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:14:10,525 - INFO - Period 3: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:14:10,525 - INFO - Period 4: Charging on Wednesday at 22:00-00:00
2025-02-11 17:14:10,525 - ERROR - Unexpected error in schedule update: name 'success' is not defined
2025-02-11 17:14:10,526 - ERROR - Schedule update failed
2025-02-11 17:26:43,761 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:26:47,125 - INFO - Current battery SOC: 4.0%
2025-02-11 17:26:47,141 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:26:50,602 - INFO - Updating schedule at 2025-02-11 17:26:50.602715+01:00 (Current SOC: 4.0%)
2025-02-11 17:26:50,602 - INFO - 
=== Current Schedule ===
2025-02-11 17:26:50,602 - INFO - Period 1: Charging on Tuesday at 23:00-00:00
2025-02-11 17:26:50,802 - INFO - Clearing current schedule due to low SOC (4.0%)
2025-02-11 17:26:50,803 - INFO - 
=== New Periods for Tomorrow ===
2025-02-11 17:26:50,803 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:26:50,803 - INFO - Period 2: Charging on Wednesday at 22:00-00:00
2025-02-11 17:26:50,812 - INFO - Period 3: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:26:50,812 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:26:50,812 - INFO - 
=== Final Schedule ===
2025-02-11 17:26:50,812 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:26:50,812 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:26:50,812 - INFO - Period 3: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:26:50,812 - INFO - Period 4: Charging on Wednesday at 22:00-00:00
2025-02-11 17:26:50,812 - ERROR - Unexpected error in schedule update: name 'success' is not defined
2025-02-11 17:26:50,813 - ERROR - Schedule update failed
2025-02-11 17:28:07,969 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:28:11,187 - INFO - Current battery SOC: 4.0%
2025-02-11 17:28:11,193 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:28:14,623 - INFO - Updating schedule at 2025-02-11 17:28:14.623622+01:00 (Current SOC: 4.0%)
2025-02-11 17:28:14,623 - INFO - 
=== Current Schedule ===
2025-02-11 17:28:14,623 - INFO - Period 1: Charging on Tuesday at 23:00-00:00
2025-02-11 17:28:15,285 - INFO - Clearing current schedule due to low SOC (4.0%)
2025-02-11 17:28:15,285 - INFO - 
=== New Periods for Tomorrow ===
2025-02-11 17:28:15,285 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:28:15,285 - INFO - Period 2: Charging on Tuesday at 22:00-00:00
2025-02-11 17:28:15,299 - INFO - Period 3: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:28:15,299 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:28:15,299 - INFO - 
=== Final Schedule ===
2025-02-11 17:28:15,299 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:28:15,299 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:28:15,300 - INFO - Period 3: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:28:15,300 - INFO - Period 4: Charging on Tuesday at 22:00-00:00
2025-02-11 17:28:15,300 - ERROR - Unexpected error in schedule update: name 'success' is not defined
2025-02-11 17:28:15,300 - ERROR - Schedule update failed
2025-02-11 17:33:10,061 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:33:13,750 - INFO - Current battery SOC: 4.0%
2025-02-11 17:33:13,754 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:33:18,194 - INFO - Updating schedule at 2025-02-11 17:33:18.194564+01:00 (Current SOC: 4.0%)
2025-02-11 17:33:18,194 - INFO - 
=== Current Schedule ===
2025-02-11 17:33:18,199 - INFO - Period 1: Charging on Tuesday at 23:00-00:00
2025-02-11 17:33:18,394 - INFO - Clearing current schedule due to low SOC (4.0%)
2025-02-11 17:33:18,413 - INFO - 
=== New Periods for Tomorrow ===
2025-02-11 17:33:18,413 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:33:18,413 - INFO - Period 2: Charging on Tuesday at 22:00-00:00
2025-02-11 17:33:18,414 - INFO - Period 3: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:33:18,414 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:33:18,415 - INFO - 
=== Final Schedule ===
2025-02-11 17:33:18,415 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:33:18,416 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:33:18,416 - INFO - Period 3: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:33:18,416 - INFO - Period 4: Charging on Tuesday at 22:00-00:00
2025-02-11 17:33:18,417 - ERROR - Unexpected error in schedule update: name 'success' is not defined
2025-02-11 17:33:18,417 - ERROR - Schedule update failed
2025-02-11 17:34:07,131 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:34:10,768 - INFO - Current battery SOC: 4.0%
2025-02-11 17:34:10,770 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:34:14,835 - INFO - Updating schedule at 2025-02-11 17:34:14.835303+01:00 (Current SOC: 4.0%)
2025-02-11 17:34:14,835 - INFO - 
=== Current Schedule ===
2025-02-11 17:34:14,835 - INFO - Period 1: Charging on Tuesday at 23:00-00:00
2025-02-11 17:34:15,358 - INFO - Clearing current schedule due to low SOC (4.0%)
2025-02-11 17:34:15,365 - INFO - 
=== New Periods for Tomorrow ===
2025-02-11 17:34:15,366 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:34:15,366 - INFO - Period 2: Charging on Tuesday at 22:00-00:00
2025-02-11 17:34:15,366 - INFO - Period 3: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:34:15,367 - INFO - Period 4: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:34:15,367 - INFO - 
=== Final Schedule ===
2025-02-11 17:34:15,367 - INFO - Period 1: Charging on Wednesday at 01:00-03:00
2025-02-11 17:34:15,367 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-11 17:34:15,368 - INFO - Period 3: Discharging on Wednesday at 18:00-19:00
2025-02-11 17:34:15,368 - INFO - Period 4: Charging on Tuesday at 22:00-00:00
2025-02-11 17:34:15,371 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-11 17:34:18,959 - INFO - Successfully wrote schedule to battery
2025-02-11 17:34:18,959 - INFO - Successfully updated battery schedule
2025-02-11 17:34:18,959 - INFO - Schedule update completed successfully
2025-02-15 13:17:53,795 - INFO - Schedule update attempt 1/3
2025-02-15 13:17:53,808 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-15 13:17:57,413 - INFO - Current battery SOC: 96.0%
2025-02-15 13:17:57,421 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-15 13:18:03,445 - ERROR - Exception response 131 / 0
2025-02-15 13:18:03,446 - ERROR - Error reading register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-15 13:18:03,446 - ERROR - Error reading schedule: Error reading register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-15 13:18:03,446 - ERROR - Error on attempt 1/3: Error reading schedule: Error reading register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-15 13:18:03,447 - INFO - Waiting 60 seconds before retry...
2025-02-15 13:19:03,453 - INFO - Schedule update attempt 2/3
2025-02-15 13:19:03,467 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-15 13:19:08,494 - INFO - Current battery SOC: 96.0%
2025-02-15 13:19:08,506 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-15 13:19:12,197 - INFO - Updating schedule at 2025-02-15 13:19:12.188191+01:00 (Current SOC: 96.0%)
2025-02-15 13:19:12,198 - INFO - 
=== Current Schedule ===
2025-02-15 13:19:12,198 - INFO - Period 1: Discharging on Saturday at 18:00-21:00
2025-02-15 13:19:12,616 - INFO - Checking for future periods to preserve (SOC: 96.0%)
2025-02-15 13:19:12,618 - INFO - Preserving 1 future periods
2025-02-15 13:19:12,636 - INFO - 
=== New Periods for Tomorrow ===
2025-02-15 13:19:12,637 - INFO - Period 1: Charging on Sunday at 04:00-05:00
2025-02-15 13:19:12,637 - INFO - Period 2: Charging on Saturday at 22:00-00:00
2025-02-15 13:19:12,637 - INFO - Period 3: Discharging on Sunday at 17:00-20:00
2025-02-15 13:19:12,637 - INFO - 
=== Final Schedule ===
2025-02-15 13:19:12,637 - INFO - Period 1: Charging on Sunday at 04:00-05:00
2025-02-15 13:19:12,637 - INFO - Period 2: Discharging on Sunday at 17:00-20:00
2025-02-15 13:19:12,637 - INFO - Period 3: Discharging on Saturday at 18:00-21:00
2025-02-15 13:19:12,637 - INFO - Period 4: Charging on Saturday at 22:00-00:00
2025-02-15 13:19:12,643 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-15 13:19:12,643 - INFO - Attempting to write schedule data: [4, 240, 300, 1, 1020, 1200, 257, 1080, 1260, 320, 1320, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
2025-02-15 13:19:16,076 - INFO - Successfully wrote schedule to battery
2025-02-15 13:19:16,076 - INFO - Successfully updated battery schedule
2025-02-15 13:19:16,076 - INFO - Schedule update completed successfully
2025-02-16 16:01:28,522 - INFO - Schedule update attempt 1/3
2025-02-16 16:01:28,539 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-16 16:01:33,680 - INFO - Current battery SOC: 94.0%
2025-02-16 16:01:33,687 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-16 16:01:37,444 - INFO - Updating schedule at 2025-02-16 16:01:37.439886+01:00 (Current SOC: 94.0%)
2025-02-16 16:01:37,444 - INFO - 
=== Current Schedule ===
2025-02-16 16:01:37,445 - INFO - Period 1: Discharging on Sunday at 17:00-20:00
2025-02-16 16:01:37,892 - INFO - Checking for future periods to preserve (SOC: 94.0%)
2025-02-16 16:01:37,892 - INFO - Preserving 1 future periods
2025-02-16 16:01:37,909 - INFO - 
=== New Periods for Tomorrow ===
2025-02-16 16:01:37,909 - INFO - Period 1: Charging on Monday at 02:00-04:00
2025-02-16 16:01:37,909 - INFO - Period 2: Charging on Sunday at 23:00-00:00
2025-02-16 16:01:37,909 - INFO - Period 3: Discharging on Monday at 08:00-09:00
2025-02-16 16:01:37,909 - INFO - Period 4: Discharging on Monday at 17:00-19:00
2025-02-16 16:01:37,910 - INFO - 
=== Final Schedule ===
2025-02-16 16:01:37,910 - INFO - Period 1: Charging on Monday at 02:00-04:00
2025-02-16 16:01:37,910 - INFO - Period 2: Discharging on Monday at 08:00-09:00
2025-02-16 16:01:37,910 - INFO - Period 3: Discharging on Sunday at 17:00-20:00
2025-02-16 16:01:37,910 - INFO - Period 4: Discharging on Monday at 17:00-19:00
2025-02-16 16:01:37,910 - INFO - Period 5: Charging on Sunday at 23:00-00:00
2025-02-16 16:01:37,915 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-16 16:01:37,915 - INFO - Attempting to write schedule data: [5, 120, 240, 2, 480, 540, 258, 1020, 1200, 257, 1020, 1140, 258, 1380, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
2025-02-16 16:01:41,747 - INFO - Successfully wrote schedule to battery
2025-02-16 16:01:41,748 - INFO - Successfully updated battery schedule
2025-02-16 16:01:41,748 - INFO - Schedule update completed successfully
2025-02-16 19:30:34,025 - INFO - Schedule update attempt 1/3
2025-02-16 19:30:34,043 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-16 19:30:37,479 - INFO - Current battery SOC: 5.0%
2025-02-16 19:30:37,488 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-16 19:30:40,959 - INFO - Updating schedule at 2025-02-16 19:30:40.957727+01:00 (Current SOC: 5.0%)
2025-02-16 19:30:40,959 - INFO - 
=== Current Schedule ===
2025-02-16 19:30:40,959 - INFO - Period 1: Charging on Sunday at 23:00-00:00
2025-02-16 19:30:41,424 - INFO - Clearing current schedule due to low SOC (5.0%)
2025-02-16 19:30:41,438 - INFO - 
=== New Periods for Tomorrow ===
2025-02-16 19:30:41,438 - INFO - Period 1: Charging on Monday at 02:00-04:00
2025-02-16 19:30:41,438 - INFO - Period 2: Charging on Sunday at 23:00-00:00
2025-02-16 19:30:41,438 - INFO - Period 3: Discharging on Monday at 08:00-09:00
2025-02-16 19:30:41,438 - INFO - Period 4: Discharging on Monday at 17:00-19:00
2025-02-16 19:30:41,438 - INFO - 
=== Final Schedule ===
2025-02-16 19:30:41,438 - INFO - Period 1: Charging on Monday at 02:00-04:00
2025-02-16 19:30:41,438 - INFO - Period 2: Discharging on Monday at 08:00-09:00
2025-02-16 19:30:41,438 - INFO - Period 3: Discharging on Monday at 17:00-19:00
2025-02-16 19:30:41,438 - INFO - Period 4: Charging on Sunday at 23:00-00:00
2025-02-16 19:30:41,445 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-16 19:30:41,445 - INFO - Attempting to write schedule data: [4, 120, 240, 2, 480, 540, 258, 1020, 1140, 258, 1380, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
2025-02-16 19:30:44,790 - INFO - Successfully wrote schedule to battery
2025-02-16 19:30:44,795 - INFO - Successfully updated battery schedule
2025-02-16 19:30:44,796 - INFO - Schedule update completed successfully
2025-02-17 17:26:23,061 - INFO - Schedule update attempt 1/3
2025-02-17 17:26:23,080 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-17 17:26:26,329 - INFO - Current battery SOC: 47.0%
2025-02-17 17:26:26,348 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-17 17:26:30,137 - INFO - Updating schedule at 2025-02-17 17:26:30.136065+01:00 (Current SOC: 47.0%)
2025-02-17 17:26:30,138 - INFO - 
=== Current Schedule ===
2025-02-17 17:26:30,526 - INFO - Checking for future periods to preserve (SOC: 47.0%)
2025-02-17 17:26:30,532 - INFO - No future periods found in current schedule
2025-02-17 17:26:30,543 - INFO - 
=== New Periods for Tomorrow ===
2025-02-17 17:26:30,543 - INFO - Period 1: Charging on Tuesday at 01:00-03:00
2025-02-17 17:26:30,543 - INFO - Period 2: Charging on Tuesday at 04:00-05:00
2025-02-17 17:26:30,543 - INFO - Period 3: Discharging on Tuesday at 07:00-09:00
2025-02-17 17:26:30,543 - INFO - Period 4: Discharging on Tuesday at 18:00-19:00
2025-02-17 17:26:30,544 - INFO - 
=== Final Schedule ===
2025-02-17 17:26:30,544 - INFO - Period 1: Charging on Tuesday at 01:00-03:00
2025-02-17 17:26:30,544 - INFO - Period 2: Charging on Tuesday at 04:00-05:00
2025-02-17 17:26:30,544 - INFO - Period 3: Discharging on Tuesday at 07:00-09:00
2025-02-17 17:26:30,544 - INFO - Period 4: Discharging on Tuesday at 18:00-19:00
2025-02-17 17:26:30,550 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-17 17:26:30,550 - INFO - Attempting to write schedule data: [4, 60, 180, 4, 240, 300, 4, 420, 540, 260, 1080, 1140, 260, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
2025-02-17 17:26:34,389 - INFO - Successfully wrote schedule to battery
2025-02-17 17:26:34,391 - INFO - Successfully updated battery schedule
2025-02-17 17:26:34,391 - INFO - Schedule update completed successfully
2025-02-17 19:14:40,623 - INFO - Schedule update attempt 1/3
2025-02-17 19:14:40,641 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-17 19:14:43,919 - INFO - Current battery SOC: 5.0%
2025-02-17 19:14:43,925 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-17 19:14:47,860 - INFO - Updating schedule at 2025-02-17 19:14:47.859242+01:00 (Current SOC: 5.0%)
2025-02-17 19:14:47,861 - INFO - 
=== Current Schedule ===
2025-02-17 19:14:48,263 - INFO - Clearing current schedule due to low SOC (5.0%)
2025-02-17 19:14:48,281 - INFO - 
=== New Periods for Tomorrow ===
2025-02-17 19:14:48,282 - INFO - Period 1: Charging on Tuesday at 01:00-03:00
2025-02-17 19:14:48,282 - INFO - Period 2: Charging on Tuesday at 04:00-05:00
2025-02-17 19:14:48,282 - INFO - Period 3: Discharging on Tuesday at 07:00-09:00
2025-02-17 19:14:48,282 - INFO - Period 4: Discharging on Tuesday at 18:00-19:00
2025-02-17 19:14:48,282 - INFO - 
=== Final Schedule ===
2025-02-17 19:14:48,282 - INFO - Period 1: Charging on Tuesday at 01:00-03:00
2025-02-17 19:14:48,282 - INFO - Period 2: Charging on Tuesday at 04:00-05:00
2025-02-17 19:14:48,282 - INFO - Period 3: Discharging on Tuesday at 07:00-09:00
2025-02-17 19:14:48,282 - INFO - Period 4: Discharging on Tuesday at 18:00-19:00
2025-02-17 19:14:48,288 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-17 19:14:48,288 - INFO - Attempting to write schedule data: [4, 60, 180, 4, 240, 300, 4, 420, 540, 260, 1080, 1140, 260, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
2025-02-17 19:14:52,053 - INFO - Successfully wrote schedule to battery
2025-02-17 19:14:52,054 - INFO - Successfully updated battery schedule
2025-02-17 19:14:52,054 - INFO - Schedule update completed successfully
2025-02-17 19:54:46,500 - INFO - Schedule update attempt 1/3
2025-02-17 19:54:46,512 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-17 19:54:50,470 - INFO - Current battery SOC: 5.0%
2025-02-17 19:54:50,480 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-17 19:54:53,784 - INFO - Updating schedule at 2025-02-17 19:54:53.783483+01:00 (Current SOC: 5.0%)
2025-02-17 19:54:53,784 - INFO - 
=== Current Schedule ===
2025-02-17 19:54:54,192 - INFO - Clearing current schedule due to low SOC (5.0%)
2025-02-17 19:54:54,209 - INFO - 
=== New Periods for Tomorrow ===
2025-02-17 19:54:54,209 - INFO - Period 1: Charging on Tuesday at 01:00-03:00
2025-02-17 19:54:54,209 - INFO - Period 2: Charging on Tuesday at 04:00-05:00
2025-02-17 19:54:54,209 - INFO - Period 3: Discharging on Tuesday at 07:00-09:00
2025-02-17 19:54:54,209 - INFO - Period 4: Discharging on Tuesday at 18:00-19:00
2025-02-17 19:54:54,210 - INFO - 
=== Final Schedule ===
2025-02-17 19:54:54,210 - INFO - Period 1: Charging on Tuesday at 01:00-03:00
2025-02-17 19:54:54,210 - INFO - Period 2: Charging on Tuesday at 04:00-05:00
2025-02-17 19:54:54,210 - INFO - Period 3: Discharging on Tuesday at 07:00-09:00
2025-02-17 19:54:54,210 - INFO - Period 4: Discharging on Tuesday at 18:00-19:00
2025-02-17 19:54:54,210 - INFO - Successfully updated battery schedule
2025-02-17 19:54:54,210 - INFO - Schedule update completed successfully
2025-02-24 23:22:33,282 - INFO - Starting Battery Management System
2025-02-24 23:22:33,282 - INFO - Scheduler service started
2025-02-24 23:22:33,282 - INFO - Starting high usage monitor service
2025-02-24 23:22:33,492 - ERROR - Unexpected error: cannot import name 'main' from 'high_usage_monitor' (/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py)
2025-02-25 15:32:36,792 - INFO - Starting Battery Management System
2025-02-25 15:32:36,793 - INFO - Scheduler service started
2025-02-25 15:32:36,793 - INFO - Starting high usage monitor service
2025-02-25 15:32:37,040 - INFO - Starting high usage monitor
2025-02-25 15:32:37,040 - INFO - Starting Tibber Pulse power monitoring
2025-02-25 15:32:37,042 - INFO - >>> {"query": "query IntrospectionQuery {\n  __schema {\n    queryType {\n      name\n    }\n    mutationType {\n      name\n    }\n    subscriptionType {\n      name\n    }\n    types {\n      ...FullType\n    }\n    directives {\n      name\n      description\n      locations\n      args {\n        ...InputValue\n      }\n    }\n  }\n}\n\nfragment FullType on __Type {\n  kind\n  name\n  description\n  fields(includeDeprecated: true) {\n    name\n    description\n    args {\n      ...InputValue\n    }\n    type {\n      ...TypeRef\n    }\n    isDeprecated\n    deprecationReason\n  }\n  inputFields {\n    ...InputValue\n  }\n  interfaces {\n    ...TypeRef\n  }\n  enumValues(includeDeprecated: true) {\n    name\n    description\n    isDeprecated\n    deprecationReason\n  }\n  possibleTypes {\n    ...TypeRef\n  }\n}\n\nfragment InputValue on __InputValue {\n  name\n  description\n  type {\n    ...TypeRef\n  }\n  defaultValue\n}\n\nfragment TypeRef on __Type {\n  kind\n  name\n  ofType {\n    kind\n    name\n    ofType {\n      kind\n      name\n      ofType {\n        kind\n        name\n        ofType {\n          kind\n          name\n          ofType {\n            kind\n            name\n            ofType {\n              kind\n              name\n              ofType {\n                kind\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}"}
2025-02-25 15:32:37,264 - INFO - <<< {"data":{"__schema":{"queryType":{"name":"Query"},"mutationType":{"name":"RootMutation"},"subscriptionType":{"name":"RootSubscription"},"types":[{"kind":"OBJECT","name":"Address","description":null,"fields":[{"name":"address1","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"address2","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"address3","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"city","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"postalCode","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"country","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"latitude","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"longitude","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"String","description":"The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"ContactInfo","description":null,"fields":[{"name":"email","description":"The email of the corresponding entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"mobile","description":"The mobile phone number of the corresponding entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"LegalEntity","description":null,"fields":[{"name":"id","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"firstName","description":"First/Given name of the entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isCompany","description":"True if the entity is a company","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"name","description":"Full name of the entity","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"middleName","description":"Middle name of the entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"lastName","description":"Last name of the entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"organizationNo","description":"Organization number - only populated if entity is a company (isCompany=true)","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"language","description":"The primary language of the entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"contactInfo","description":"Contact information of the entity","args":[],"type":{"kind":"OBJECT","name":"ContactInfo","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"address","description":"Address information for the entity","args":[],"type":{"kind":"OBJECT","name":"Address","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"ID","description":"The `ID` scalar type represents a unique identifier, often used to refetch an object or as key for a cache. The ID type appears in a JSON response as a String; however, it is not intended to be human-readable. When expected as an input type, any string (such as `\"4\"`) or integer (such as `4`) input value will be accepted as an ID.","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"Boolean","description":"The `Boolean` scalar type represents `true` or `false`.","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeConsumptionPageInfo","description":null,"fields":[{"name":"endCursor","description":"The global ID of the last element in the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasNextPage","description":"True if further pages are available","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasPreviousPage","description":"True if previous pages are available","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startCursor","description":"The global ID of the first element in the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"count","description":"The number of elements in the page","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The currency of the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"totalCost","description":"Page total cost","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"energyCost","description":"Page energy cost","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"redundant"},{"name":"totalConsumption","description":"Total consumption for page","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"filtered","description":"Number of entries that have been filtered from result set due to empty nodes","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[{"kind":"INTERFACE","name":"PageInfo","ofType":null}],"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"Int","description":"The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"Float","description":"The `Float` scalar type represents signed double-precision fractional values as specified by [IEEE 754](https://en.wikipedia.org/wiki/IEEE_floating_point).","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeProductionPageInfo","description":null,"fields":[{"name":"endCursor","description":"The global ID of the last element in the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasNextPage","description":"True if further pages are available","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasPreviousPage","description":"True if previous pages are available","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startCursor","description":"The global ID of the first element in the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"count","description":"The number of elements in the page","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The currency of the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"totalProfit","description":"Page total profit","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"totalProduction","description":"Page total production","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"filtered","description":"Number of entries that have been filtered from result set due to empty nodes","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[{"kind":"INTERFACE","name":"PageInfo","ofType":null}],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Price","description":null,"fields":[{"name":"total","description":"The total price (energy + taxes)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"energy","description":"Nord Pool spot price","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"tax","description":"The tax part of the price (guarantee of origin certificate, energy tax (Sweden only) and VAT)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startsAt","description":"The start time of the price","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The price currency","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"level","description":"The price level compared to recent price values","args":[],"type":{"kind":"ENUM","name":"PriceLevel","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"PriceLevel","description":"Price level based on trailing price average (3 days for hourly values and 30 days for daily values)","fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"NORMAL","description":"The price is greater than 90 % and less than 115 % compared to average price","isDeprecated":false,"deprecationReason":null},{"name":"CHEAP","description":"The price is greater than 60 % and less or equal to 90 % compared to average price","isDeprecated":false,"deprecationReason":null},{"name":"VERY_CHEAP","description":"The price is smaller or equal to 60 % compared to average price","isDeprecated":false,"deprecationReason":null},{"name":"EXPENSIVE","description":"The price is greater or equal to 115 % and less than 140 % compared to average price","isDeprecated":false,"deprecationReason":null},{"name":"VERY_EXPENSIVE","description":"The price is greater or equal to 140 % compared to average price","isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"SubscriptionPriceEdge","description":null,"fields":[{"name":"cursor","description":"The global ID of the element","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"node","description":"A single price node","args":[],"type":{"kind":"OBJECT","name":"Price","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"INTERFACE","name":"PageInfo","description":null,"fields":[{"name":"endCursor","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasNextPage","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasPreviousPage","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startCursor","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":[{"kind":"OBJECT","name":"HomeConsumptionPageInfo","ofType":null},{"kind":"OBJECT","name":"HomeProductionPageInfo","ofType":null},{"kind":"OBJECT","name":"SubscriptionPriceConnectionPageInfo","ofType":null}]},{"kind":"OBJECT","name":"SubscriptionPriceConnectionPageInfo","description":null,"fields":[{"name":"endCursor","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasNextPage","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasPreviousPage","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startCursor","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"resolution","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"count","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"precision","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"minEnergy","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"minTotal","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"maxEnergy","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"maxTotal","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[{"kind":"INTERFACE","name":"PageInfo","ofType":null}],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"SubscriptionPriceConnection","description":null,"fields":[{"name":"pageInfo","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"SubscriptionPriceConnectionPageInfo","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"edges","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"SubscriptionPriceEdge","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"nodes","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Price","ofType":null}}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"PriceResolution","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"HOURLY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"DAILY","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"PriceInfo","description":null,"fields":[{"name":"current","description":"The energy price right now","args":[],"type":{"kind":"OBJECT","name":"Price","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"today","description":"The hourly prices of the current day","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Price","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"tomorrow","description":"The hourly prices of the upcoming day","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Price","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"range","description":"Range of prices, optionally relative to `before`/`after` arguments. Capped at 744 items (31 days) for resolution HOURLY, and 31 items for resolution DAILY. If you need to fetch a longer interval, perform multiple requests and take advantage of the `pageInfo` data. Do note that prices never change, so store already fetched historical prices locally; if you can use `today`/`tomorrow` instead, use that since the API can serve this data faster and in a more reliable way.","args":[{"name":"resolution","description":"Temporal resolution","type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"PriceResolution","ofType":null}},"defaultValue":null},{"name":"first","description":"Take the `n` first results from cursor. Cannot be used in conjunction with `last`. Limit count: 744 (HOURLY), 31 (DAILY).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"last","description":"Take the `n` last results from cursor. Cannot be used in conjunction with `first`. Limit count: 744 (HOURLY), 31 (DAILY).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"before","description":"Base64-encoded ISO8601 date/time cursor position. Cannot be used in conjunction with `after.` Has no influence when `first` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"after","description":"Base64-encoded ISO8601 date/time cursor position. Cannot be used in conjunction with `before`. Has no influence when `last` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null}],"type":{"kind":"OBJECT","name":"SubscriptionPriceConnection","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"PriceRatingLevel","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"NORMAL","description":"The price is within the range of what is considered being normal (market dependent; see 'priceRating.thresholdPercentages' for limits)","isDeprecated":false,"deprecationReason":null},{"name":"LOW","description":"The price is within the range of what is considered being low (market dependent; see 'priceRating.thresholdPercentages' for limits)","isDeprecated":false,"deprecationReason":null},{"name":"HIGH","description":"The price is within the range of what is considered being high (market dependent; see 'priceRating.thresholdPercentages' for limits)","isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"PriceRatingEntry","description":null,"fields":[{"name":"time","description":"The start time of the price","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"energy","description":"Nord Pool spot price","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"total","description":"The total price (incl. tax)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"tax","description":"The tax part of the price (guarantee of origin certificate, energy tax (Sweden only) and VAT)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"difference","description":"The percentage difference compared to the trailing price average (1 day for 'hourly', 30 days for 'daily' and 32 months for 'monthly')","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"level","description":"The price level compared to recent price values (calculated using 'difference' and 'priceRating.thresholdPercentages')","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"PriceRatingLevel","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"PriceRatingType","description":null,"fields":[{"name":"minEnergy","description":"Lowest Nord Pool spot price over the time period","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"maxEnergy","description":"Highest Nord Pool spot price over the time period","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"minTotal","description":"Lowest total price (incl. tax) over the time period","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"maxTotal","description":"Highest total price (incl. tax) over the time period","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The price currency","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"entries","description":"The individual price entries aggregated by hourly/daily/monthly values","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingEntry","ofType":null}}}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"PriceRatingThresholdPercentages","description":null,"fields":[{"name":"high","description":"The percentage difference when the price is considered to be 'high' (market dependent)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"low","description":"The percentage difference when the price is considered to be 'low' (market dependent)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"PriceRating","description":null,"fields":[{"name":"thresholdPercentages","description":"The different 'high'/'low' price breakpoints (market dependent)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingThresholdPercentages","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"hourly","description":"The hourly prices of today, the previous 7 days, and tomorrow","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingType","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"daily","description":"The daily prices of today and the previous 30 days","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingType","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"monthly","description":"The monthly prices of this month and the previous 31 months","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingType","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Subscription","description":null,"fields":[{"name":"id","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"subscriber","description":"The owner of the subscription","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"LegalEntity","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"validFrom","description":"The time the subscription started","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"validTo","description":"The time the subscription ended","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"status","description":"The current status of the subscription","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"statusReason","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":true,"deprecationReason":"no longer available"},{"name":"priceInfo","description":"Price information related to the subscription","args":[],"type":{"kind":"OBJECT","name":"PriceInfo","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"priceRating","description":"Price information related to the subscription","args":[],"type":{"kind":"OBJECT","name":"PriceRating","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Consumption","description":null,"fields":[{"name":"from","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"to","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"unitPrice","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"unitPriceVAT","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"consumption","description":"kWh consumed","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"consumptionUnit","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"totalCost","description":"Total cost of the consumption","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"use `cost` instead"},{"name":"unitCost","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"use `cost` instead"},{"name":"cost","description":"Consumption cost (consumption  unitPrice); including VAT (where applicable), excluding fees (where applicable), excluding production reward, excluding Grid Rewards","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The cost currency","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Production","description":null,"fields":[{"name":"from","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"to","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"unitPrice","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"unitPriceVAT","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"production","description":"kWh produced","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"productionUnit","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"profit","description":"Total profit of the production","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The cost currency","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeConsumptionEdge","description":null,"fields":[{"name":"cursor","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"node","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Consumption","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeProductionEdge","description":null,"fields":[{"name":"cursor","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"node","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Production","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeConsumptionConnection","description":null,"fields":[{"name":"pageInfo","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"HomeConsumptionPageInfo","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"nodes","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Consumption","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"edges","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"HomeConsumptionEdge","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeProductionConnection","description":null,"fields":[{"name":"pageInfo","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"HomeProductionPageInfo","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"nodes","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Production","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"edges","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"HomeProductionEdge","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"MeteringPointData","description":null,"fields":[{"name":"consumptionEan","description":"The metering point ID of the home","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"gridCompany","description":"The grid provider of the home","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"gridAreaCode","description":"The grid area the home/metering point belongs to","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"priceAreaCode","description":"The price area the home/metering point belongs to","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"productionEan","description":"The metering point ID of the production","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"energyTaxType","description":"The eltax type of the home (only relevant for Swedish homes)","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"vatType","description":"The VAT type of the home (only relevant for Norwegian homes)","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"estimatedAnnualConsumption","description":"The estimated annual consumption as reported by grid company","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"EnergyResolution","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"HOURLY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"DAILY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"WEEKLY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"MONTHLY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ANNUAL","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"ENUM","name":"HomeType","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"APARTMENT","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ROWHOUSE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"HOUSE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"COTTAGE","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"ENUM","name":"HeatingSource","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"AIR2AIR_HEATPUMP","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ELECTRICITY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"GROUND","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"DISTRICT_HEATING","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ELECTRIC_BOILER","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"AIR2WATER_HEATPUMP","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"OTHER","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"ENUM","name":"HomeAvatar","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"APARTMENT","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ROWHOUSE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"FLOORHOUSE1","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"FLOORHOUSE2","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"FLOORHOUSE3","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"COTTAGE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"CASTLE","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"HomeFeatures","description":null,"fields":[{"name":"realTimeConsumptionEnabled","description":"'true' if Tibber Pulse or Watty device is paired at home","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Home","description":null,"fields":[{"name":"id","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"timeZone","description":"The time zone the home resides in","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"appNickname","description":"The nickname given to the home by the user","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"appAvatar","description":"The chosen avatar for the home","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"HomeAvatar","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"size","description":"The size of the home in square meters","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"type","description":"The type of home.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"HomeType","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"numberOfResidents","description":"The number of people living in the home","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"primaryHeatingSource","description":"The primary form of heating in the household","args":[],"type":{"kind":"ENUM","name":"HeatingSource","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasVentilationSystem","description":"Whether the home has a ventilation system","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"mainFuseSize","description":"The main fuse size","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"address","description":null,"args":[],"type":{"kind":"OBJECT","name":"Address","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"owner","description":"The registered owner of the house","args":[],"type":{"kind":"OBJECT","name":"LegalEntity","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"meteringPointData","description":null,"args":[],"type":{"kind":"OBJECT","name":"MeteringPointData","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentSubscription","description":"The current/latest subscription related to the home","args":[],"type":{"kind":"OBJECT","name":"Subscription","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"subscriptions","description":"All historic subscriptions related to the home","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Subscription","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"consumption","description":"Consumption connection. Capped at 744 items (31 days) for resolution HOURLY, 31 items for DAILY, 52 items for WEEKLY, 12 items for MONTHLY and 1 for ANNUAL. If you need to fetch a longer interval, perform multiple requests and take advantage of the `pageInfo` data. Do note that this data is not updated in real-time, so try not to fetch this continually if there is no need to; and try to cache/store historical data locally.","args":[{"name":"resolution","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"EnergyResolution","ofType":null}},"defaultValue":null},{"name":"first","description":"Take the `n` first results from cursor. Cannot be used in conjunction with `last`. Limit count: 744 (HOURLY), 31 (DAILY), 52 (WEEKLY), 12 (MONTHLY), 1 (ANNUAL).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"last","description":"Take the `n` last results from cursor. Cannot be used in conjunction with `first`. Limit count: 744 (HOURLY), 31 (DAILY), 52 (WEEKLY), 12 (MONTHLY), 1 (ANNUAL).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"before","description":"Base64-encoded ISO8601 date/time cursor start. Cannot be used in conjunction with `after`. Has no influence when `first` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"after","description":"Base64-encoded ISO8601 date/time cursor start. Cannot be used in conjunction with `before`. Has no influence when `last` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"filterEmptyNodes","description":"Whether to include empty nodes. Default value: false","type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"OBJECT","name":"HomeConsumptionConnection","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"production","description":"Production connection. Capped at 744 items (31 days) for resolution HOURLY, 31 items for DAILY, 52 items for WEEKLY, 12 items for MONTHLY and 1 for ANNUAL. If you need to fetch a longer interval, perform multiple requests and take advantage of the `pageInfo` data. Do note that this data is not updated in real-time, so try not to fetch this continually if there is no need to; and try to cache/store historical data locally.","args":[{"name":"resolution","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"EnergyResolution","ofType":null}},"defaultValue":null},{"name":"first","description":"Take the `n` first results from cursor. Cannot be used in conjunction with `last`. Limit count: 744 (HOURLY), 31 (DAILY), 52 (WEEKLY), 12 (MONTHLY), 1 (ANNUAL).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"last","description":"Take the `n` last results from cursor. Cannot be used in conjunction with `first`. Limit count: 744 (HOURLY), 31 (DAILY), 52 (WEEKLY), 12 (MONTHLY), 1 (ANNUAL).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"before","description":"Base64-encoded ISO8601 date/time cursor start. Cannot be used in conjunction with `after`. Has no influence when `first` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"after","description":"Base64-encoded ISO8601 date/time cursor start. Cannot be used in conjunction with `before`. Has no influence when `last` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"filterEmptyNodes","description":"Whether to include empty nodes. Default value: false","type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"OBJECT","name":"HomeProductionConnection","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"features","description":"Home features","args":[],"type":{"kind":"OBJECT","name":"HomeFeatures","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Viewer","description":null,"fields":[{"name":"login","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"userId","description":"Unique user identifier","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"name","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"accountType","description":"The type of account for the logged-in user.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}}}},"isDeprecated":false,"deprecationReason":null},{"name":"homes","description":"All homes visible to the logged-in user","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Home","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"home","description":"Single home by its ID","args":[{"name":"id","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Home","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"websocketSubscriptionUrl","description":"URL for websocket subscriptions","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Query","description":null,"fields":[{"name":"viewer","description":"This contains data about the logged-in user","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Viewer","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"INPUT_OBJECT","name":"MeterReadingInput","description":"Deprecated; sending this in will do nothing","fields":null,"inputFields":[{"name":"homeId","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null},{"name":"time","description":null,"type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"reading","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"defaultValue":null}],"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"MeterReadingResponse","description":"Deprecated; will only return default values","fields":[{"name":"homeId","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"isDeprecated":true,"deprecationReason":"do not use anymore"},{"name":"time","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":true,"deprecationReason":"always returns `null`"},{"name":"reading","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":true,"deprecationReason":"always returns `0`"}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"INPUT_OBJECT","name":"UpdateHomeInput","description":null,"fields":null,"inputFields":[{"name":"homeId","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null},{"name":"appNickname","description":null,"type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"appAvatar","description":"The chosen avatar for the home","type":{"kind":"ENUM","name":"HomeAvatar","ofType":null},"defaultValue":null},{"name":"size","description":"The size of the home in square meters","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"type","description":"The type of home","type":{"kind":"ENUM","name":"HomeType","ofType":null},"defaultValue":null},{"name":"numberOfResidents","description":"The number of people living in the household","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"primaryHeatingSource","description":"The primary form of heating in the home","type":{"kind":"ENUM","name":"HeatingSource","ofType":null},"defaultValue":null},{"name":"hasVentilationSystem","description":"Whether the home has a ventilation system","type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":null},{"name":"mainFuseSize","description":"The main fuse size in amperes","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null}],"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"LiveMeasurement","description":"Real-time measurement data from Pulse or Watty device. For meter connected Pulses, the data update rate is governed by the meter, but may be throttled/batched by Tibber. Differences in meter hardware and/or firmware means that it is not guaranteed that all fields are present in every data frame and furthermore cannot be guaranteed to be fully correct or complete, given that Tibber relies on what the meter provides. Tibber does not normalize or modify the meter data other than to try to handle known meter/firmware bugs and idiosyncrasies. Meter data may be enriched with additional aggregated fields where possible.","fields":[{"name":"timestamp","description":"Timestamp when usage occurred","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"power","description":"Consumption at the moment in watts (W)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"lastMeterConsumption","description":"Last meter active import register state in kilowatt-hours (kWh)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedConsumption","description":"Energy consumed since midnight in kilowatt-hours (kWh)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedProduction","description":"Net energy produced since midnight in kilowatt-hours (kWh)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedConsumptionLastHour","description":"Energy consumed since last hour shift in kilowatt-hours (kWh)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedProductionLastHour","description":"Net energy produced since last hour shift in kilowatt-hours (kWh)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedCost","description":"Accumulated cost since midnight; requires active Tibber power deal; includes VAT (where applicable)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedReward","description":"Accumulated production reward since midnight; requires active Tibber power deal. Note that this is unrelated to Grid Rewards.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"Currency of displayed cost; requires active Tibber power deal","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"minPower","description":"Minimum power consumption since midnight in watts (W)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"averagePower","description":"Average power consumption since midnight in watts (W)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"maxPower","description":"Peak power consumption since midnight in watts (W)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"powerProduction","description":"Net power production (A-) at the moment in watts (W)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"powerReactive","description":"Reactive power consumption (Q+) at the moment (kVAr)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"powerProductionReactive","description":"Net reactive power production (Q-) at the moment (kVAr)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"minPowerProduction","description":"Minimum net power production since midnight in watts (W)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"maxPowerProduction","description":"Maximum net power production since midnight in watts (W)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"lastMeterProduction","description":"Last meter active export register state in kilowatt-hours (kWh)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"powerFactor","description":"Power factor (active power / apparent power); 0 to 1 where 1 is 100 %","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"voltagePhase1","description":"Voltage on phase 1; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"voltagePhase2","description":"Voltage on phase 2; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"voltagePhase3","description":"Voltage on phase 3; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentL1","description":"Current on L1; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentL2","description":"Current on L2; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentL3","description":"Current on L3; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentPhase1","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"superseded by `currentL1`"},{"name":"currentPhase2","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"superseded by `currentL2`"},{"name":"currentPhase3","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"superseded by `currentL3`"},{"name":"signalStrength","description":"Device signal strength (Pulse: dB(m); Watty: percent)","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"AppScreen","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"HOME","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"REPORTS","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"CONSUMPTION","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"COMPARISON","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"DISAGGREGATION","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"HOME_PROFILE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"CUSTOMER_PROFILE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"METER_READING","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"NOTIFICATIONS","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"INVOICES","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"INPUT_OBJECT","name":"PushNotificationInput","description":null,"fields":null,"inputFields":[{"name":"title","description":null,"type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"message","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"defaultValue":null},{"name":"screenToOpen","description":null,"type":{"kind":"ENUM","name":"AppScreen","ofType":null},"defaultValue":null}],"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"PushNotificationResponse","description":null,"fields":[{"name":"successful","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"pushedToNumberOfDevices","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"RootMutation","description":null,"fields":[{"name":"sendMeterReading","description":"Deprecated; calling this mutation will do nothing","args":[{"name":"input","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"INPUT_OBJECT","name":"MeterReadingInput","ofType":null}},"defaultValue":null}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"MeterReadingResponse","ofType":null}},"isDeprecated":true,"deprecationReason":"no longer available"},{"name":"updateHome","description":"Update home information","args":[{"name":"input","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"INPUT_OBJECT","name":"UpdateHomeInput","ofType":null}},"defaultValue":null}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Home","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"sendPushNotification","description":"Send notification to Tibber app on registered devices","args":[{"name":"input","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"INPUT_OBJECT","name":"PushNotificationInput","ofType":null}},"defaultValue":null}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PushNotificationResponse","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"RootSubscription","description":null,"fields":[{"name":"liveMeasurement","description":"Subscribe to real-time measurement stream from Pulse or Watty device","args":[{"name":"homeId","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null}],"type":{"kind":"OBJECT","name":"LiveMeasurement","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"testMeasurement","description":"Subscribe to test stream","args":[{"name":"homeId","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null}],"type":{"kind":"OBJECT","name":"LiveMeasurement","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__Schema","description":"A GraphQL Schema defines the capabilities of a GraphQL server. It exposes all available types and directives on the server, as well as the entry points for query, mutation, and subscription operations.","fields":[{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"types","description":"A list of all types supported by this server.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}}}},"isDeprecated":false,"deprecationReason":null},{"name":"queryType","description":"The type that query operations will be rooted at.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"mutationType","description":"If this server supports mutation, the type that mutation operations will be rooted at.","args":[],"type":{"kind":"OBJECT","name":"__Type","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"subscriptionType","description":"If this server support subscription, the type that subscription operations will be rooted at.","args":[],"type":{"kind":"OBJECT","name":"__Type","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"directives","description":"A list of all directives supported by this server.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Directive","ofType":null}}}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__Type","description":"The fundamental unit of any GraphQL Schema is the type. There are many kinds of types in GraphQL as represented by the `__TypeKind` enum.\n\nDepending on the kind of a type, certain fields describe information about that type. Scalar types provide no information beyond a name, description and optional `specifiedByURL`, while Enum types provide their values. Object and Interface types provide the fields they describe. Abstract types, Union and Interface, provide the Object types possible at runtime. List and NonNull types compose other types.","fields":[{"name":"kind","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"__TypeKind","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"name","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"specifiedByURL","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"fields","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Field","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"interfaces","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"possibleTypes","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"enumValues","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__EnumValue","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"inputFields","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__InputValue","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"ofType","description":null,"args":[],"type":{"kind":"OBJECT","name":"__Type","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isOneOf","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"__TypeKind","description":"An enum describing what kind of type a given `__Type` is.","fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"SCALAR","description":"Indicates this type is a scalar.","isDeprecated":false,"deprecationReason":null},{"name":"OBJECT","description":"Indicates this type is an object. `fields` and `interfaces` are valid fields.","isDeprecated":false,"deprecationReason":null},{"name":"INTERFACE","description":"Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields.","isDeprecated":false,"deprecationReason":null},{"name":"UNION","description":"Indicates this type is a union. `possibleTypes` is a valid field.","isDeprecated":false,"deprecationReason":null},{"name":"ENUM","description":"Indicates this type is an enum. `enumValues` is a valid field.","isDeprecated":false,"deprecationReason":null},{"name":"INPUT_OBJECT","description":"Indicates this type is an input object. `inputFields` is a valid field.","isDeprecated":false,"deprecationReason":null},{"name":"LIST","description":"Indicates this type is a list. `ofType` is a valid field.","isDeprecated":false,"deprecationReason":null},{"name":"NON_NULL","description":"Indicates this type is a non-null. `ofType` is a valid field.","isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"__Field","description":"Object and Interface types are described by a list of Fields, each of which has a name, potentially a list of arguments, and a return type.","fields":[{"name":"name","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"args","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__InputValue","ofType":null}}}},"isDeprecated":false,"deprecationReason":null},{"name":"type","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"isDeprecated","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"deprecationReason","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__InputValue","description":"Arguments provided to Fields or Directives and the input fields of an InputObject are represented as Input Values which describe their type and optionally a default value.","fields":[{"name":"name","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"type","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"defaultValue","description":"A GraphQL-formatted string representing the default value for this input value.","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isDeprecated","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"deprecationReason","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__EnumValue","description":"One possible value for a given Enum. Enum values are unique values, not a placeholder for a string or numeric value. However an Enum value is returned in a JSON response as a string.","fields":[{"name":"name","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isDeprecated","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"deprecationReason","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__Directive","description":"A Directive provides a way to describe alternate runtime execution and type validation behavior in a GraphQL document.\n\nIn some cases, you need to provide options to alter GraphQL's execution behavior in ways field arguments will not suffice, such as conditionally including or skipping a field. Directives provide this by describing additional information to the executor.","fields":[{"name":"name","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isRepeatable","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"locations","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"__DirectiveLocation","ofType":null}}}},"isDeprecated":false,"deprecationReason":null},{"name":"args","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__InputValue","ofType":null}}}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"__DirectiveLocation","description":"A Directive can be adjacent to many parts of the GraphQL language, a __DirectiveLocation describes one such possible adjacencies.","fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"QUERY","description":"Location adjacent to a query operation.","isDeprecated":false,"deprecationReason":null},{"name":"MUTATION","description":"Location adjacent to a mutation operation.","isDeprecated":false,"deprecationReason":null},{"name":"SUBSCRIPTION","description":"Location adjacent to a subscription operation.","isDeprecated":false,"deprecationReason":null},{"name":"FIELD","description":"Location adjacent to a field.","isDeprecated":false,"deprecationReason":null},{"name":"FRAGMENT_DEFINITION","description":"Location adjacent to a fragment definition.","isDeprecated":false,"deprecationReason":null},{"name":"FRAGMENT_SPREAD","description":"Location adjacent to a fragment spread.","isDeprecated":false,"deprecationReason":null},{"name":"INLINE_FRAGMENT","description":"Location adjacent to an inline fragment.","isDeprecated":false,"deprecationReason":null},{"name":"VARIABLE_DEFINITION","description":"Location adjacent to a variable definition.","isDeprecated":false,"deprecationReason":null},{"name":"SCHEMA","description":"Location adjacent to a schema definition.","isDeprecated":false,"deprecationReason":null},{"name":"SCALAR","description":"Location adjacent to a scalar definition.","isDeprecated":false,"deprecationReason":null},{"name":"OBJECT","description":"Location adjacent to an object type definition.","isDeprecated":false,"deprecationReason":null},{"name":"FIELD_DEFINITION","description":"Location adjacent to a field definition.","isDeprecated":false,"deprecationReason":null},{"name":"ARGUMENT_DEFINITION","description":"Location adjacent to an argument definition.","isDeprecated":false,"deprecationReason":null},{"name":"INTERFACE","description":"Location adjacent to an interface definition.","isDeprecated":false,"deprecationReason":null},{"name":"UNION","description":"Location adjacent to a union definition.","isDeprecated":false,"deprecationReason":null},{"name":"ENUM","description":"Location adjacent to an enum definition.","isDeprecated":false,"deprecationReason":null},{"name":"ENUM_VALUE","description":"Location adjacent to an enum value definition.","isDeprecated":false,"deprecationReason":null},{"name":"INPUT_OBJECT","description":"Location adjacent to an input object type definition.","isDeprecated":false,"deprecationReason":null},{"name":"INPUT_FIELD_DEFINITION","description":"Location adjacent to an input object field definition.","isDeprecated":false,"deprecationReason":null}],"possibleTypes":null}],"directives":[{"name":"include","description":"Directs the executor to include this field or fragment only when the `if` argument is true.","locations":["FIELD","FRAGMENT_SPREAD","INLINE_FRAGMENT"],"args":[{"name":"if","description":"Included when true.","type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"defaultValue":null}]},{"name":"skip","description":"Directs the executor to skip this field or fragment when the `if` argument is true.","locations":["FIELD","FRAGMENT_SPREAD","INLINE_FRAGMENT"],"args":[{"name":"if","description":"Skipped when true.","type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"defaultValue":null}]},{"name":"deprecated","description":"Marks an element of a GraphQL schema as no longer supported.","locations":["FIELD_DEFINITION","ARGUMENT_DEFINITION","INPUT_FIELD_DEFINITION","ENUM_VALUE"],"args":[{"name":"reason","description":"Explains why this element was deprecated, usually also including a suggestion for how to access supported similar data. Formatted using the Markdown syntax, as specified by [CommonMark](https://commonmark.org/).","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":"\"No longer supported\""}]},{"name":"specifiedBy","description":"Exposes a URL that specifies the behavior of this scalar.","locations":["SCALAR"],"args":[{"name":"url","description":"The URL that specifies the behavior of this scalar.","type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"defaultValue":null}]},{"name":"oneOf","description":"Indicates exactly one field must be supplied and this field must not be `null`.","locations":["INPUT_OBJECT"],"args":[]}]}}}

2025-02-25 15:32:37,317 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:37,317 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:38,320 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:38,320 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:39,329 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:39,329 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:40,340 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:40,340 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:41,349 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:41,349 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:42,365 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:42,365 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:43,372 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:43,372 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:44,379 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:44,379 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:45,388 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:45,389 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:46,396 - ERROR - Error fetching Tibber data: Cannot query field 'liveMeasurement' on type 'Home'.

GraphQL request:6:19
5 |                   id
6 |                   liveMeasurement {
  |                   ^
7 |                     timestamp
2025-02-25 15:32:46,397 - WARNING - Failed to get power measurement, retrying...
2025-02-25 15:32:47,296 - INFO - Services stopped by user
2025-02-25 15:53:29,663 - INFO - Starting Battery Management System
2025-02-25 15:53:29,663 - INFO - Scheduler service started
2025-02-25 15:53:29,663 - INFO - Starting high usage monitor service
2025-02-25 15:53:29,854 - INFO - Starting high usage monitor
2025-02-25 15:53:29,854 - INFO - Test mode enabled - battery connections will be simulated
2025-02-25 15:53:29,854 - INFO - Starting Tibber Pulse power monitoring
2025-02-25 15:53:48,893 - INFO - Detected high power usage: 10.00 kW
2025-02-25 15:53:48,894 - INFO - High power usage continues: 10.00 kW (count: 1/10)
2025-02-25 15:53:49,895 - INFO - High power usage continues: 10.00 kW (count: 2/10)
2025-02-25 15:53:50,897 - INFO - High power usage continues: 10.00 kW (count: 3/10)
2025-02-25 15:53:51,897 - INFO - High power usage continues: 10.00 kW (count: 4/10)
2025-02-25 15:53:52,899 - INFO - High power usage continues: 10.00 kW (count: 5/10)
2025-02-25 15:53:53,901 - INFO - High power usage continues: 10.00 kW (count: 6/10)
2025-02-25 15:53:54,905 - INFO - High power usage continues: 10.00 kW (count: 7/10)
2025-02-25 15:53:55,907 - INFO - High power usage continues: 10.00 kW (count: 8/10)
2025-02-25 15:53:56,910 - INFO - High power usage continues: 10.00 kW (count: 9/10)
2025-02-25 15:53:57,913 - INFO - High power usage continues: 10.00 kW (count: 10/10)
2025-02-25 15:53:57,914 - INFO - Sustained high power usage detected: 10.00 kW for 10 seconds
2025-02-25 15:53:57,914 - INFO - Switching to max self-consumption mode (SOC: 50.0%)
2025-02-25 15:53:57,914 - INFO - TEST MODE: Simulating battery mode switch
2025-02-25 15:53:57,914 - INFO - Successfully switched to max self-consumption mode
2025-02-25 15:53:58,916 - INFO - Detected high power usage: 10.00 kW
2025-02-25 15:53:58,917 - INFO - High power usage continues: 10.00 kW (count: 1/10)
2025-02-25 15:53:59,918 - INFO - High power usage continues: 10.00 kW (count: 2/10)
2025-02-25 15:54:00,921 - INFO - High power usage continues: 10.00 kW (count: 3/10)
2025-02-25 15:54:01,924 - INFO - High power usage continues: 10.00 kW (count: 4/10)
2025-02-25 15:54:02,926 - INFO - High power usage continues: 10.00 kW (count: 5/10)
2025-02-25 15:54:03,928 - INFO - High power usage continues: 10.00 kW (count: 6/10)
2025-02-25 15:54:04,930 - INFO - High power usage continues: 10.00 kW (count: 7/10)
2025-02-25 15:54:05,931 - INFO - High power usage continues: 10.00 kW (count: 8/10)
2025-02-25 15:54:06,940 - INFO - High power usage continues: 10.00 kW (count: 9/10)
2025-02-25 15:54:07,941 - INFO - High power usage continues: 10.00 kW (count: 10/10)
2025-02-25 15:54:07,942 - INFO - Sustained high power usage detected: 10.00 kW for 10 seconds
2025-02-25 15:54:07,942 - INFO - Switching to max self-consumption mode (SOC: 50.0%)
2025-02-25 15:54:07,942 - INFO - TEST MODE: Simulating battery mode switch
2025-02-25 15:54:07,942 - INFO - Successfully switched to max self-consumption mode
2025-02-25 15:54:08,945 - INFO - Detected high power usage: 10.00 kW
2025-02-25 15:54:08,947 - INFO - High power usage continues: 10.00 kW (count: 1/10)
2025-02-25 15:54:09,948 - INFO - Power usage returned to normal: 4.00 kW
2025-02-25 16:03:18,796 - INFO - Services stopped by user
2025-02-25 16:04:27,106 - INFO - Starting Battery Management System
2025-02-25 16:04:27,106 - INFO - Scheduler service started
2025-02-25 16:04:27,106 - INFO - Starting high usage monitor service
2025-02-25 16:04:27,212 - INFO - Starting high usage monitor
2025-02-25 16:04:30,432 - INFO - Successfully connected to battery. Current mode: 6
2025-02-25 16:04:30,433 - INFO - Starting Tibber Pulse power monitoring
2025-02-25 16:04:30,442 - INFO - >>> {"query": "query IntrospectionQuery {\n  __schema {\n    queryType {\n      name\n    }\n    mutationType {\n      name\n    }\n    subscriptionType {\n      name\n    }\n    types {\n      ...FullType\n    }\n    directives {\n      name\n      description\n      locations\n      args {\n        ...InputValue\n      }\n    }\n  }\n}\n\nfragment FullType on __Type {\n  kind\n  name\n  description\n  fields(includeDeprecated: true) {\n    name\n    description\n    args {\n      ...InputValue\n    }\n    type {\n      ...TypeRef\n    }\n    isDeprecated\n    deprecationReason\n  }\n  inputFields {\n    ...InputValue\n  }\n  interfaces {\n    ...TypeRef\n  }\n  enumValues(includeDeprecated: true) {\n    name\n    description\n    isDeprecated\n    deprecationReason\n  }\n  possibleTypes {\n    ...TypeRef\n  }\n}\n\nfragment InputValue on __InputValue {\n  name\n  description\n  type {\n    ...TypeRef\n  }\n  defaultValue\n}\n\nfragment TypeRef on __Type {\n  kind\n  name\n  ofType {\n    kind\n    name\n    ofType {\n      kind\n      name\n      ofType {\n        kind\n        name\n        ofType {\n          kind\n          name\n          ofType {\n            kind\n            name\n            ofType {\n              kind\n              name\n              ofType {\n                kind\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}"}
2025-02-25 16:04:30,670 - INFO - <<< {"data":{"__schema":{"queryType":{"name":"Query"},"mutationType":{"name":"RootMutation"},"subscriptionType":{"name":"RootSubscription"},"types":[{"kind":"OBJECT","name":"Address","description":null,"fields":[{"name":"address1","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"address2","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"address3","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"city","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"postalCode","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"country","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"latitude","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"longitude","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"String","description":"The `String` scalar type represents textual data, represented as UTF-8 character sequences. The String type is most often used by GraphQL to represent free-form human-readable text.","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"ContactInfo","description":null,"fields":[{"name":"email","description":"The email of the corresponding entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"mobile","description":"The mobile phone number of the corresponding entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"LegalEntity","description":null,"fields":[{"name":"id","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"firstName","description":"First/Given name of the entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isCompany","description":"True if the entity is a company","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"name","description":"Full name of the entity","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"middleName","description":"Middle name of the entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"lastName","description":"Last name of the entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"organizationNo","description":"Organization number - only populated if entity is a company (isCompany=true)","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"language","description":"The primary language of the entity","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"contactInfo","description":"Contact information of the entity","args":[],"type":{"kind":"OBJECT","name":"ContactInfo","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"address","description":"Address information for the entity","args":[],"type":{"kind":"OBJECT","name":"Address","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"ID","description":"The `ID` scalar type represents a unique identifier, often used to refetch an object or as key for a cache. The ID type appears in a JSON response as a String; however, it is not intended to be human-readable. When expected as an input type, any string (such as `\"4\"`) or integer (such as `4`) input value will be accepted as an ID.","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"Boolean","description":"The `Boolean` scalar type represents `true` or `false`.","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeConsumptionPageInfo","description":null,"fields":[{"name":"endCursor","description":"The global ID of the last element in the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasNextPage","description":"True if further pages are available","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasPreviousPage","description":"True if previous pages are available","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startCursor","description":"The global ID of the first element in the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"count","description":"The number of elements in the page","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The currency of the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"totalCost","description":"Page total cost","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"energyCost","description":"Page energy cost","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"redundant"},{"name":"totalConsumption","description":"Total consumption for page","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"filtered","description":"Number of entries that have been filtered from result set due to empty nodes","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[{"kind":"INTERFACE","name":"PageInfo","ofType":null}],"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"Int","description":"The `Int` scalar type represents non-fractional signed whole numeric values. Int can represent values between -(2^31) and 2^31 - 1.","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"SCALAR","name":"Float","description":"The `Float` scalar type represents signed double-precision fractional values as specified by [IEEE 754](https://en.wikipedia.org/wiki/IEEE_floating_point).","fields":null,"inputFields":null,"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeProductionPageInfo","description":null,"fields":[{"name":"endCursor","description":"The global ID of the last element in the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasNextPage","description":"True if further pages are available","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasPreviousPage","description":"True if previous pages are available","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startCursor","description":"The global ID of the first element in the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"count","description":"The number of elements in the page","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The currency of the page","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"totalProfit","description":"Page total profit","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"totalProduction","description":"Page total production","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"filtered","description":"Number of entries that have been filtered from result set due to empty nodes","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[{"kind":"INTERFACE","name":"PageInfo","ofType":null}],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Price","description":null,"fields":[{"name":"total","description":"The total price (energy + taxes)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"energy","description":"Nord Pool spot price","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"tax","description":"The tax part of the price (guarantee of origin certificate, energy tax (Sweden only) and VAT)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startsAt","description":"The start time of the price","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The price currency","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"level","description":"The price level compared to recent price values","args":[],"type":{"kind":"ENUM","name":"PriceLevel","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"PriceLevel","description":"Price level based on trailing price average (3 days for hourly values and 30 days for daily values)","fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"NORMAL","description":"The price is greater than 90 % and less than 115 % compared to average price","isDeprecated":false,"deprecationReason":null},{"name":"CHEAP","description":"The price is greater than 60 % and less or equal to 90 % compared to average price","isDeprecated":false,"deprecationReason":null},{"name":"VERY_CHEAP","description":"The price is smaller or equal to 60 % compared to average price","isDeprecated":false,"deprecationReason":null},{"name":"EXPENSIVE","description":"The price is greater or equal to 115 % and less than 140 % compared to average price","isDeprecated":false,"deprecationReason":null},{"name":"VERY_EXPENSIVE","description":"The price is greater or equal to 140 % compared to average price","isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"SubscriptionPriceEdge","description":null,"fields":[{"name":"cursor","description":"The global ID of the element","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"node","description":"A single price node","args":[],"type":{"kind":"OBJECT","name":"Price","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"INTERFACE","name":"PageInfo","description":null,"fields":[{"name":"endCursor","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasNextPage","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasPreviousPage","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startCursor","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":[{"kind":"OBJECT","name":"HomeConsumptionPageInfo","ofType":null},{"kind":"OBJECT","name":"HomeProductionPageInfo","ofType":null},{"kind":"OBJECT","name":"SubscriptionPriceConnectionPageInfo","ofType":null}]},{"kind":"OBJECT","name":"SubscriptionPriceConnectionPageInfo","description":null,"fields":[{"name":"endCursor","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasNextPage","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasPreviousPage","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"startCursor","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"resolution","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"count","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"precision","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"minEnergy","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"minTotal","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"maxEnergy","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"maxTotal","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[{"kind":"INTERFACE","name":"PageInfo","ofType":null}],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"SubscriptionPriceConnection","description":null,"fields":[{"name":"pageInfo","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"SubscriptionPriceConnectionPageInfo","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"edges","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"SubscriptionPriceEdge","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"nodes","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Price","ofType":null}}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"PriceResolution","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"HOURLY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"DAILY","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"PriceInfo","description":null,"fields":[{"name":"current","description":"The energy price right now","args":[],"type":{"kind":"OBJECT","name":"Price","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"today","description":"The hourly prices of the current day","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Price","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"tomorrow","description":"The hourly prices of the upcoming day","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Price","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"range","description":"Range of prices, optionally relative to `before`/`after` arguments. Capped at 744 items (31 days) for resolution HOURLY, and 31 items for resolution DAILY. If you need to fetch a longer interval, perform multiple requests and take advantage of the `pageInfo` data. Do note that prices never change, so store already fetched historical prices locally; if you can use `today`/`tomorrow` instead, use that since the API can serve this data faster and in a more reliable way.","args":[{"name":"resolution","description":"Temporal resolution","type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"PriceResolution","ofType":null}},"defaultValue":null},{"name":"first","description":"Take the `n` first results from cursor. Cannot be used in conjunction with `last`. Limit count: 744 (HOURLY), 31 (DAILY).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"last","description":"Take the `n` last results from cursor. Cannot be used in conjunction with `first`. Limit count: 744 (HOURLY), 31 (DAILY).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"before","description":"Base64-encoded ISO8601 date/time cursor position. Cannot be used in conjunction with `after.` Has no influence when `first` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"after","description":"Base64-encoded ISO8601 date/time cursor position. Cannot be used in conjunction with `before`. Has no influence when `last` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null}],"type":{"kind":"OBJECT","name":"SubscriptionPriceConnection","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"PriceRatingLevel","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"NORMAL","description":"The price is within the range of what is considered being normal (market dependent; see 'priceRating.thresholdPercentages' for limits)","isDeprecated":false,"deprecationReason":null},{"name":"LOW","description":"The price is within the range of what is considered being low (market dependent; see 'priceRating.thresholdPercentages' for limits)","isDeprecated":false,"deprecationReason":null},{"name":"HIGH","description":"The price is within the range of what is considered being high (market dependent; see 'priceRating.thresholdPercentages' for limits)","isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"PriceRatingEntry","description":null,"fields":[{"name":"time","description":"The start time of the price","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"energy","description":"Nord Pool spot price","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"total","description":"The total price (incl. tax)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"tax","description":"The tax part of the price (guarantee of origin certificate, energy tax (Sweden only) and VAT)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"difference","description":"The percentage difference compared to the trailing price average (1 day for 'hourly', 30 days for 'daily' and 32 months for 'monthly')","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"level","description":"The price level compared to recent price values (calculated using 'difference' and 'priceRating.thresholdPercentages')","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"PriceRatingLevel","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"PriceRatingType","description":null,"fields":[{"name":"minEnergy","description":"Lowest Nord Pool spot price over the time period","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"maxEnergy","description":"Highest Nord Pool spot price over the time period","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"minTotal","description":"Lowest total price (incl. tax) over the time period","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"maxTotal","description":"Highest total price (incl. tax) over the time period","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The price currency","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"entries","description":"The individual price entries aggregated by hourly/daily/monthly values","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingEntry","ofType":null}}}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"PriceRatingThresholdPercentages","description":null,"fields":[{"name":"high","description":"The percentage difference when the price is considered to be 'high' (market dependent)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"low","description":"The percentage difference when the price is considered to be 'low' (market dependent)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"PriceRating","description":null,"fields":[{"name":"thresholdPercentages","description":"The different 'high'/'low' price breakpoints (market dependent)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingThresholdPercentages","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"hourly","description":"The hourly prices of today, the previous 7 days, and tomorrow","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingType","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"daily","description":"The daily prices of today and the previous 30 days","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingType","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"monthly","description":"The monthly prices of this month and the previous 31 months","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PriceRatingType","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Subscription","description":null,"fields":[{"name":"id","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"subscriber","description":"The owner of the subscription","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"LegalEntity","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"validFrom","description":"The time the subscription started","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"validTo","description":"The time the subscription ended","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"status","description":"The current status of the subscription","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"statusReason","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":true,"deprecationReason":"no longer available"},{"name":"priceInfo","description":"Price information related to the subscription","args":[],"type":{"kind":"OBJECT","name":"PriceInfo","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"priceRating","description":"Price information related to the subscription","args":[],"type":{"kind":"OBJECT","name":"PriceRating","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Consumption","description":null,"fields":[{"name":"from","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"to","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"unitPrice","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"unitPriceVAT","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"consumption","description":"kWh consumed","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"consumptionUnit","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"totalCost","description":"Total cost of the consumption","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"use `cost` instead"},{"name":"unitCost","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"use `cost` instead"},{"name":"cost","description":"Consumption cost (consumption  unitPrice); including VAT (where applicable), excluding fees (where applicable), excluding production reward, excluding Grid Rewards","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The cost currency","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Production","description":null,"fields":[{"name":"from","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"to","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"unitPrice","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"unitPriceVAT","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"production","description":"kWh produced","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"productionUnit","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"profit","description":"Total profit of the production","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"The cost currency","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeConsumptionEdge","description":null,"fields":[{"name":"cursor","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"node","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Consumption","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeProductionEdge","description":null,"fields":[{"name":"cursor","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"node","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Production","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeConsumptionConnection","description":null,"fields":[{"name":"pageInfo","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"HomeConsumptionPageInfo","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"nodes","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Consumption","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"edges","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"HomeConsumptionEdge","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"HomeProductionConnection","description":null,"fields":[{"name":"pageInfo","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"HomeProductionPageInfo","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"nodes","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Production","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"edges","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"HomeProductionEdge","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"MeteringPointData","description":null,"fields":[{"name":"consumptionEan","description":"The metering point ID of the home","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"gridCompany","description":"The grid provider of the home","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"gridAreaCode","description":"The grid area the home/metering point belongs to","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"priceAreaCode","description":"The price area the home/metering point belongs to","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"productionEan","description":"The metering point ID of the production","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"energyTaxType","description":"The eltax type of the home (only relevant for Swedish homes)","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"vatType","description":"The VAT type of the home (only relevant for Norwegian homes)","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"estimatedAnnualConsumption","description":"The estimated annual consumption as reported by grid company","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"EnergyResolution","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"HOURLY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"DAILY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"WEEKLY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"MONTHLY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ANNUAL","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"ENUM","name":"HomeType","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"APARTMENT","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ROWHOUSE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"HOUSE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"COTTAGE","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"ENUM","name":"HeatingSource","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"AIR2AIR_HEATPUMP","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ELECTRICITY","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"GROUND","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"DISTRICT_HEATING","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ELECTRIC_BOILER","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"AIR2WATER_HEATPUMP","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"OTHER","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"ENUM","name":"HomeAvatar","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"APARTMENT","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"ROWHOUSE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"FLOORHOUSE1","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"FLOORHOUSE2","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"FLOORHOUSE3","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"COTTAGE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"CASTLE","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"HomeFeatures","description":null,"fields":[{"name":"realTimeConsumptionEnabled","description":"'true' if Tibber Pulse or Watty device is paired at home","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Home","description":null,"fields":[{"name":"id","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"timeZone","description":"The time zone the home resides in","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"appNickname","description":"The nickname given to the home by the user","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"appAvatar","description":"The chosen avatar for the home","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"HomeAvatar","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"size","description":"The size of the home in square meters","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"type","description":"The type of home.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"HomeType","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"numberOfResidents","description":"The number of people living in the home","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"primaryHeatingSource","description":"The primary form of heating in the household","args":[],"type":{"kind":"ENUM","name":"HeatingSource","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"hasVentilationSystem","description":"Whether the home has a ventilation system","args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"mainFuseSize","description":"The main fuse size","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"address","description":null,"args":[],"type":{"kind":"OBJECT","name":"Address","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"owner","description":"The registered owner of the house","args":[],"type":{"kind":"OBJECT","name":"LegalEntity","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"meteringPointData","description":null,"args":[],"type":{"kind":"OBJECT","name":"MeteringPointData","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentSubscription","description":"The current/latest subscription related to the home","args":[],"type":{"kind":"OBJECT","name":"Subscription","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"subscriptions","description":"All historic subscriptions related to the home","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Subscription","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"consumption","description":"Consumption connection. Capped at 744 items (31 days) for resolution HOURLY, 31 items for DAILY, 52 items for WEEKLY, 12 items for MONTHLY and 1 for ANNUAL. If you need to fetch a longer interval, perform multiple requests and take advantage of the `pageInfo` data. Do note that this data is not updated in real-time, so try not to fetch this continually if there is no need to; and try to cache/store historical data locally.","args":[{"name":"resolution","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"EnergyResolution","ofType":null}},"defaultValue":null},{"name":"first","description":"Take the `n` first results from cursor. Cannot be used in conjunction with `last`. Limit count: 744 (HOURLY), 31 (DAILY), 52 (WEEKLY), 12 (MONTHLY), 1 (ANNUAL).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"last","description":"Take the `n` last results from cursor. Cannot be used in conjunction with `first`. Limit count: 744 (HOURLY), 31 (DAILY), 52 (WEEKLY), 12 (MONTHLY), 1 (ANNUAL).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"before","description":"Base64-encoded ISO8601 date/time cursor start. Cannot be used in conjunction with `after`. Has no influence when `first` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"after","description":"Base64-encoded ISO8601 date/time cursor start. Cannot be used in conjunction with `before`. Has no influence when `last` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"filterEmptyNodes","description":"Whether to include empty nodes. Default value: false","type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"OBJECT","name":"HomeConsumptionConnection","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"production","description":"Production connection. Capped at 744 items (31 days) for resolution HOURLY, 31 items for DAILY, 52 items for WEEKLY, 12 items for MONTHLY and 1 for ANNUAL. If you need to fetch a longer interval, perform multiple requests and take advantage of the `pageInfo` data. Do note that this data is not updated in real-time, so try not to fetch this continually if there is no need to; and try to cache/store historical data locally.","args":[{"name":"resolution","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"EnergyResolution","ofType":null}},"defaultValue":null},{"name":"first","description":"Take the `n` first results from cursor. Cannot be used in conjunction with `last`. Limit count: 744 (HOURLY), 31 (DAILY), 52 (WEEKLY), 12 (MONTHLY), 1 (ANNUAL).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"last","description":"Take the `n` last results from cursor. Cannot be used in conjunction with `first`. Limit count: 744 (HOURLY), 31 (DAILY), 52 (WEEKLY), 12 (MONTHLY), 1 (ANNUAL).","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"before","description":"Base64-encoded ISO8601 date/time cursor start. Cannot be used in conjunction with `after`. Has no influence when `first` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"after","description":"Base64-encoded ISO8601 date/time cursor start. Cannot be used in conjunction with `before`. Has no influence when `last` is used.","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"filterEmptyNodes","description":"Whether to include empty nodes. Default value: false","type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"OBJECT","name":"HomeProductionConnection","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"features","description":"Home features","args":[],"type":{"kind":"OBJECT","name":"HomeFeatures","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Viewer","description":null,"fields":[{"name":"login","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"userId","description":"Unique user identifier","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"name","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"accountType","description":"The type of account for the logged-in user.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}}}},"isDeprecated":false,"deprecationReason":null},{"name":"homes","description":"All homes visible to the logged-in user","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"OBJECT","name":"Home","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"home","description":"Single home by its ID","args":[{"name":"id","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Home","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"websocketSubscriptionUrl","description":"URL for websocket subscriptions","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"Query","description":null,"fields":[{"name":"viewer","description":"This contains data about the logged-in user","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Viewer","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"INPUT_OBJECT","name":"MeterReadingInput","description":"Deprecated; sending this in will do nothing","fields":null,"inputFields":[{"name":"homeId","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null},{"name":"time","description":null,"type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"reading","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"defaultValue":null}],"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"MeterReadingResponse","description":"Deprecated; will only return default values","fields":[{"name":"homeId","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"isDeprecated":true,"deprecationReason":"do not use anymore"},{"name":"time","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":true,"deprecationReason":"always returns `null`"},{"name":"reading","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":true,"deprecationReason":"always returns `0`"}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"INPUT_OBJECT","name":"UpdateHomeInput","description":null,"fields":null,"inputFields":[{"name":"homeId","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null},{"name":"appNickname","description":null,"type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"appAvatar","description":"The chosen avatar for the home","type":{"kind":"ENUM","name":"HomeAvatar","ofType":null},"defaultValue":null},{"name":"size","description":"The size of the home in square meters","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"type","description":"The type of home","type":{"kind":"ENUM","name":"HomeType","ofType":null},"defaultValue":null},{"name":"numberOfResidents","description":"The number of people living in the household","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null},{"name":"primaryHeatingSource","description":"The primary form of heating in the home","type":{"kind":"ENUM","name":"HeatingSource","ofType":null},"defaultValue":null},{"name":"hasVentilationSystem","description":"Whether the home has a ventilation system","type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":null},{"name":"mainFuseSize","description":"The main fuse size in amperes","type":{"kind":"SCALAR","name":"Int","ofType":null},"defaultValue":null}],"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"LiveMeasurement","description":"Real-time measurement data from Pulse or Watty device. For meter connected Pulses, the data update rate is governed by the meter, but may be throttled/batched by Tibber. Differences in meter hardware and/or firmware means that it is not guaranteed that all fields are present in every data frame and furthermore cannot be guaranteed to be fully correct or complete, given that Tibber relies on what the meter provides. Tibber does not normalize or modify the meter data other than to try to handle known meter/firmware bugs and idiosyncrasies. Meter data may be enriched with additional aggregated fields where possible.","fields":[{"name":"timestamp","description":"Timestamp when usage occurred","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"power","description":"Consumption at the moment in watts (W)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"lastMeterConsumption","description":"Last meter active import register state in kilowatt-hours (kWh)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedConsumption","description":"Energy consumed since midnight in kilowatt-hours (kWh)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedProduction","description":"Net energy produced since midnight in kilowatt-hours (kWh)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedConsumptionLastHour","description":"Energy consumed since last hour shift in kilowatt-hours (kWh)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedProductionLastHour","description":"Net energy produced since last hour shift in kilowatt-hours (kWh)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedCost","description":"Accumulated cost since midnight; requires active Tibber power deal; includes VAT (where applicable)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"accumulatedReward","description":"Accumulated production reward since midnight; requires active Tibber power deal. Note that this is unrelated to Grid Rewards.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currency","description":"Currency of displayed cost; requires active Tibber power deal","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"minPower","description":"Minimum power consumption since midnight in watts (W)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"averagePower","description":"Average power consumption since midnight in watts (W)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"maxPower","description":"Peak power consumption since midnight in watts (W)","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Float","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"powerProduction","description":"Net power production (A-) at the moment in watts (W)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"powerReactive","description":"Reactive power consumption (Q+) at the moment (kVAr)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"powerProductionReactive","description":"Net reactive power production (Q-) at the moment (kVAr)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"minPowerProduction","description":"Minimum net power production since midnight in watts (W)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"maxPowerProduction","description":"Maximum net power production since midnight in watts (W)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"lastMeterProduction","description":"Last meter active export register state in kilowatt-hours (kWh)","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"powerFactor","description":"Power factor (active power / apparent power); 0 to 1 where 1 is 100 %","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"voltagePhase1","description":"Voltage on phase 1; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"voltagePhase2","description":"Voltage on phase 2; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"voltagePhase3","description":"Voltage on phase 3; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentL1","description":"Current on L1; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentL2","description":"Current on L2; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentL3","description":"Current on L3; on some meters, the value is not part of every data frame, therefore the value can be `null` at certain intervals. It is not guaranteed that single phase installations will be reporting on Phase 1 since Tibber does not normalize this data and only reports what is received from the meter.","args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"currentPhase1","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"superseded by `currentL1`"},{"name":"currentPhase2","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"superseded by `currentL2`"},{"name":"currentPhase3","description":null,"args":[],"type":{"kind":"SCALAR","name":"Float","ofType":null},"isDeprecated":true,"deprecationReason":"superseded by `currentL3`"},{"name":"signalStrength","description":"Device signal strength (Pulse: dB(m); Watty: percent)","args":[],"type":{"kind":"SCALAR","name":"Int","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"AppScreen","description":null,"fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"HOME","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"REPORTS","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"CONSUMPTION","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"COMPARISON","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"DISAGGREGATION","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"HOME_PROFILE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"CUSTOMER_PROFILE","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"METER_READING","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"NOTIFICATIONS","description":null,"isDeprecated":false,"deprecationReason":null},{"name":"INVOICES","description":null,"isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"INPUT_OBJECT","name":"PushNotificationInput","description":null,"fields":null,"inputFields":[{"name":"title","description":null,"type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":null},{"name":"message","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"defaultValue":null},{"name":"screenToOpen","description":null,"type":{"kind":"ENUM","name":"AppScreen","ofType":null},"defaultValue":null}],"interfaces":null,"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"PushNotificationResponse","description":null,"fields":[{"name":"successful","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"pushedToNumberOfDevices","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Int","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"RootMutation","description":null,"fields":[{"name":"sendMeterReading","description":"Deprecated; calling this mutation will do nothing","args":[{"name":"input","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"INPUT_OBJECT","name":"MeterReadingInput","ofType":null}},"defaultValue":null}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"MeterReadingResponse","ofType":null}},"isDeprecated":true,"deprecationReason":"no longer available"},{"name":"updateHome","description":"Update home information","args":[{"name":"input","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"INPUT_OBJECT","name":"UpdateHomeInput","ofType":null}},"defaultValue":null}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"Home","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"sendPushNotification","description":"Send notification to Tibber app on registered devices","args":[{"name":"input","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"INPUT_OBJECT","name":"PushNotificationInput","ofType":null}},"defaultValue":null}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"PushNotificationResponse","ofType":null}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"RootSubscription","description":null,"fields":[{"name":"liveMeasurement","description":"Subscribe to real-time measurement stream from Pulse or Watty device","args":[{"name":"homeId","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null}],"type":{"kind":"OBJECT","name":"LiveMeasurement","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"testMeasurement","description":"Subscribe to test stream","args":[{"name":"homeId","description":null,"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"ID","ofType":null}},"defaultValue":null}],"type":{"kind":"OBJECT","name":"LiveMeasurement","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__Schema","description":"A GraphQL Schema defines the capabilities of a GraphQL server. It exposes all available types and directives on the server, as well as the entry points for query, mutation, and subscription operations.","fields":[{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"types","description":"A list of all types supported by this server.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}}}},"isDeprecated":false,"deprecationReason":null},{"name":"queryType","description":"The type that query operations will be rooted at.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"mutationType","description":"If this server supports mutation, the type that mutation operations will be rooted at.","args":[],"type":{"kind":"OBJECT","name":"__Type","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"subscriptionType","description":"If this server support subscription, the type that subscription operations will be rooted at.","args":[],"type":{"kind":"OBJECT","name":"__Type","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"directives","description":"A list of all directives supported by this server.","args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Directive","ofType":null}}}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__Type","description":"The fundamental unit of any GraphQL Schema is the type. There are many kinds of types in GraphQL as represented by the `__TypeKind` enum.\n\nDepending on the kind of a type, certain fields describe information about that type. Scalar types provide no information beyond a name, description and optional `specifiedByURL`, while Enum types provide their values. Object and Interface types provide the fields they describe. Abstract types, Union and Interface, provide the Object types possible at runtime. List and NonNull types compose other types.","fields":[{"name":"kind","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"__TypeKind","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"name","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"specifiedByURL","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"fields","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Field","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"interfaces","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"possibleTypes","description":null,"args":[],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"enumValues","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__EnumValue","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"inputFields","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__InputValue","ofType":null}}},"isDeprecated":false,"deprecationReason":null},{"name":"ofType","description":null,"args":[],"type":{"kind":"OBJECT","name":"__Type","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isOneOf","description":null,"args":[],"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"__TypeKind","description":"An enum describing what kind of type a given `__Type` is.","fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"SCALAR","description":"Indicates this type is a scalar.","isDeprecated":false,"deprecationReason":null},{"name":"OBJECT","description":"Indicates this type is an object. `fields` and `interfaces` are valid fields.","isDeprecated":false,"deprecationReason":null},{"name":"INTERFACE","description":"Indicates this type is an interface. `fields`, `interfaces`, and `possibleTypes` are valid fields.","isDeprecated":false,"deprecationReason":null},{"name":"UNION","description":"Indicates this type is a union. `possibleTypes` is a valid field.","isDeprecated":false,"deprecationReason":null},{"name":"ENUM","description":"Indicates this type is an enum. `enumValues` is a valid field.","isDeprecated":false,"deprecationReason":null},{"name":"INPUT_OBJECT","description":"Indicates this type is an input object. `inputFields` is a valid field.","isDeprecated":false,"deprecationReason":null},{"name":"LIST","description":"Indicates this type is a list. `ofType` is a valid field.","isDeprecated":false,"deprecationReason":null},{"name":"NON_NULL","description":"Indicates this type is a non-null. `ofType` is a valid field.","isDeprecated":false,"deprecationReason":null}],"possibleTypes":null},{"kind":"OBJECT","name":"__Field","description":"Object and Interface types are described by a list of Fields, each of which has a name, potentially a list of arguments, and a return type.","fields":[{"name":"name","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"args","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__InputValue","ofType":null}}}},"isDeprecated":false,"deprecationReason":null},{"name":"type","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"isDeprecated","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"deprecationReason","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__InputValue","description":"Arguments provided to Fields or Directives and the input fields of an InputObject are represented as Input Values which describe their type and optionally a default value.","fields":[{"name":"name","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"type","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__Type","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"defaultValue","description":"A GraphQL-formatted string representing the default value for this input value.","args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isDeprecated","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"deprecationReason","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__EnumValue","description":"One possible value for a given Enum. Enum values are unique values, not a placeholder for a string or numeric value. However an Enum value is returned in a JSON response as a string.","fields":[{"name":"name","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isDeprecated","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"deprecationReason","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"OBJECT","name":"__Directive","description":"A Directive provides a way to describe alternate runtime execution and type validation behavior in a GraphQL document.\n\nIn some cases, you need to provide options to alter GraphQL's execution behavior in ways field arguments will not suffice, such as conditionally including or skipping a field. Directives provide this by describing additional information to the executor.","fields":[{"name":"name","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"description","description":null,"args":[],"type":{"kind":"SCALAR","name":"String","ofType":null},"isDeprecated":false,"deprecationReason":null},{"name":"isRepeatable","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"isDeprecated":false,"deprecationReason":null},{"name":"locations","description":null,"args":[],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"ENUM","name":"__DirectiveLocation","ofType":null}}}},"isDeprecated":false,"deprecationReason":null},{"name":"args","description":null,"args":[{"name":"includeDeprecated","description":null,"type":{"kind":"SCALAR","name":"Boolean","ofType":null},"defaultValue":"false"}],"type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"LIST","name":null,"ofType":{"kind":"NON_NULL","name":null,"ofType":{"kind":"OBJECT","name":"__InputValue","ofType":null}}}},"isDeprecated":false,"deprecationReason":null}],"inputFields":null,"interfaces":[],"enumValues":null,"possibleTypes":null},{"kind":"ENUM","name":"__DirectiveLocation","description":"A Directive can be adjacent to many parts of the GraphQL language, a __DirectiveLocation describes one such possible adjacencies.","fields":null,"inputFields":null,"interfaces":null,"enumValues":[{"name":"QUERY","description":"Location adjacent to a query operation.","isDeprecated":false,"deprecationReason":null},{"name":"MUTATION","description":"Location adjacent to a mutation operation.","isDeprecated":false,"deprecationReason":null},{"name":"SUBSCRIPTION","description":"Location adjacent to a subscription operation.","isDeprecated":false,"deprecationReason":null},{"name":"FIELD","description":"Location adjacent to a field.","isDeprecated":false,"deprecationReason":null},{"name":"FRAGMENT_DEFINITION","description":"Location adjacent to a fragment definition.","isDeprecated":false,"deprecationReason":null},{"name":"FRAGMENT_SPREAD","description":"Location adjacent to a fragment spread.","isDeprecated":false,"deprecationReason":null},{"name":"INLINE_FRAGMENT","description":"Location adjacent to an inline fragment.","isDeprecated":false,"deprecationReason":null},{"name":"VARIABLE_DEFINITION","description":"Location adjacent to a variable definition.","isDeprecated":false,"deprecationReason":null},{"name":"SCHEMA","description":"Location adjacent to a schema definition.","isDeprecated":false,"deprecationReason":null},{"name":"SCALAR","description":"Location adjacent to a scalar definition.","isDeprecated":false,"deprecationReason":null},{"name":"OBJECT","description":"Location adjacent to an object type definition.","isDeprecated":false,"deprecationReason":null},{"name":"FIELD_DEFINITION","description":"Location adjacent to a field definition.","isDeprecated":false,"deprecationReason":null},{"name":"ARGUMENT_DEFINITION","description":"Location adjacent to an argument definition.","isDeprecated":false,"deprecationReason":null},{"name":"INTERFACE","description":"Location adjacent to an interface definition.","isDeprecated":false,"deprecationReason":null},{"name":"UNION","description":"Location adjacent to a union definition.","isDeprecated":false,"deprecationReason":null},{"name":"ENUM","description":"Location adjacent to an enum definition.","isDeprecated":false,"deprecationReason":null},{"name":"ENUM_VALUE","description":"Location adjacent to an enum value definition.","isDeprecated":false,"deprecationReason":null},{"name":"INPUT_OBJECT","description":"Location adjacent to an input object type definition.","isDeprecated":false,"deprecationReason":null},{"name":"INPUT_FIELD_DEFINITION","description":"Location adjacent to an input object field definition.","isDeprecated":false,"deprecationReason":null}],"possibleTypes":null}],"directives":[{"name":"include","description":"Directs the executor to include this field or fragment only when the `if` argument is true.","locations":["FIELD","FRAGMENT_SPREAD","INLINE_FRAGMENT"],"args":[{"name":"if","description":"Included when true.","type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"defaultValue":null}]},{"name":"skip","description":"Directs the executor to skip this field or fragment when the `if` argument is true.","locations":["FIELD","FRAGMENT_SPREAD","INLINE_FRAGMENT"],"args":[{"name":"if","description":"Skipped when true.","type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"Boolean","ofType":null}},"defaultValue":null}]},{"name":"deprecated","description":"Marks an element of a GraphQL schema as no longer supported.","locations":["FIELD_DEFINITION","ARGUMENT_DEFINITION","INPUT_FIELD_DEFINITION","ENUM_VALUE"],"args":[{"name":"reason","description":"Explains why this element was deprecated, usually also including a suggestion for how to access supported similar data. Formatted using the Markdown syntax, as specified by [CommonMark](https://commonmark.org/).","type":{"kind":"SCALAR","name":"String","ofType":null},"defaultValue":"\"No longer supported\""}]},{"name":"specifiedBy","description":"Exposes a URL that specifies the behavior of this scalar.","locations":["SCALAR"],"args":[{"name":"url","description":"The URL that specifies the behavior of this scalar.","type":{"kind":"NON_NULL","name":null,"ofType":{"kind":"SCALAR","name":"String","ofType":null}},"defaultValue":null}]},{"name":"oneOf","description":"Indicates exactly one field must be supplied and this field must not be `null`.","locations":["INPUT_OBJECT"],"args":[]}]}}}

2025-02-25 16:04:30,678 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:04:30,815 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:04:35,130 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:04:35,323 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:04:39,796 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:04:40,017 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:04:44,643 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:04:44,848 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:04:49,314 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:04:49,521 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:04:54,225 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:04:54,426 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:04:58,750 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:04:58,940 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:05:05,798 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:05:05,993 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:05:11,639 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:05:11,848 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:05:16,487 - INFO - >>> {"query": "{\n  viewer {\n    homes {\n      id\n      features {\n        realTimeConsumptionEnabled\n      }\n    }\n  }\n}"}
2025-02-25 16:05:16,666 - INFO - <<< {"data":{"viewer":{"homes":[{"id":"a436fdaa-851b-4cc0-8a9d-5846a188141c","features":{"realTimeConsumptionEnabled":true}}]}}}

2025-02-25 16:05:20,156 - INFO - Services stopped by user
2025-02-25 16:14:21,229 - INFO - Starting Battery Management System
2025-02-25 16:14:21,229 - INFO - Scheduler service started
2025-02-25 16:14:21,230 - INFO - Starting high usage monitor service
2025-02-25 16:14:21,441 - INFO - Starting high usage monitor
2025-02-25 16:14:21,441 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:21,441 - WARNING - Could not get battery mode - check battery connection
2025-02-25 16:14:21,441 - INFO - Initializing Tibber connection...
2025-02-25 16:14:21,652 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 16:14:21,712 - INFO - Monitoring home: rdalavgen 149
2025-02-25 16:14:21,712 - INFO - Starting Tibber power monitoring
2025-02-25 16:14:21,712 - INFO - Subscribing to real-time measurements...
2025-02-25 16:14:21,995 - INFO - Successfully subscribed to real-time measurements
2025-02-25 16:14:22,881 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:22,881 - ERROR - Unable to get current battery mode
2025-02-25 16:14:23,856 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:23,857 - ERROR - Unable to get current battery mode
2025-02-25 16:14:24,929 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:24,929 - ERROR - Unable to get current battery mode
2025-02-25 16:14:25,956 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:25,956 - ERROR - Unable to get current battery mode
2025-02-25 16:14:26,771 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:26,772 - ERROR - Unable to get current battery mode
2025-02-25 16:14:27,804 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:27,805 - ERROR - Unable to get current battery mode
2025-02-25 16:14:28,820 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:28,821 - ERROR - Unable to get current battery mode
2025-02-25 16:14:29,718 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:29,719 - ERROR - Unable to get current battery mode
2025-02-25 16:14:30,867 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:30,867 - ERROR - Unable to get current battery mode
2025-02-25 16:14:32,909 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:32,909 - ERROR - Unable to get current battery mode
2025-02-25 16:14:33,202 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'get_mode'
2025-02-25 16:14:33,202 - ERROR - Unable to get current battery mode
2025-02-25 16:14:34,978 - INFO - Services stopped by user
2025-02-25 16:14:35,001 - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-9' coro=<WebSocketCommonProtocol.close_connection() done, defined at /Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py:1263> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py:975, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py:820, shield.<locals>._inner_done_callback() at /opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py:958]>
2025-02-25 16:14:35,001 - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-12' coro=<TibberHome.rt_subscribe.<locals>._start() done, defined at /Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py:463> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py:975, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py:820]>
2025-02-25 16:16:21,476 - INFO - Starting Battery Management System
2025-02-25 16:16:21,476 - INFO - Scheduler service started
2025-02-25 16:16:21,476 - INFO - Starting high usage monitor service
2025-02-25 16:16:21,645 - INFO - Starting high usage monitor
2025-02-25 16:16:25,869 - INFO - Successfully connected to battery. Current mode: 6
2025-02-25 16:16:25,871 - INFO - Initializing Tibber connection...
2025-02-25 16:16:26,110 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 16:16:26,172 - INFO - Monitoring home: rdalavgen 149
2025-02-25 16:16:26,172 - INFO - Starting Tibber power monitoring
2025-02-25 16:16:26,172 - INFO - Subscribing to real-time measurements...
2025-02-25 16:16:26,467 - INFO - Successfully subscribed to real-time measurements
2025-02-25 16:17:08,873 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-24' coro=<<async_generator_athrow without __name__>()> exception=ConnectionClosedError(None, None, None)>
Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 767, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 2 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1491, in subscribe
    await inner_generator.aclose()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1387, in _subscribe
    await inner_generator.aclose()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 406, in subscribe
    await self._stop_listener(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 212, in _stop_listener
    await self._send_complete_message(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 197, in _send_complete_message
    await self._send(complete_message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 221, in _send
    raise e
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 217, in _send
    await self.websocket.send(message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 921, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: no close frame received or sent
2025-02-25 16:17:14,233 - INFO - Services stopped by user
2025-02-25 17:02:42,612 - INFO - Starting Battery Management System
2025-02-25 17:02:42,613 - INFO - Scheduler service started
2025-02-25 17:02:42,613 - INFO - Starting high usage monitor service
2025-02-25 17:02:42,837 - INFO - Starting high usage monitor
2025-02-25 17:02:42,856 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:02:46,005 - INFO - Successfully connected to battery. Current mode: 6
2025-02-25 17:02:46,007 - INFO - Initializing Tibber connection...
2025-02-25 17:02:46,248 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 17:02:46,320 - INFO - Monitoring home: rdalavgen 149
2025-02-25 17:02:46,320 - INFO - Starting Tibber power monitoring
2025-02-25 17:02:46,320 - INFO - Subscribing to real-time measurements...
2025-02-25 17:02:46,635 - INFO - Successfully subscribed to real-time measurements
2025-02-25 17:02:48,056 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:02:51,221 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:02:54,792 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:02:57,970 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:03:01,241 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:03:04,488 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:03:07,887 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:03:16,007 - INFO - Services stopped by user
2025-02-25 17:03:16,031 - ERROR - Task was destroyed but it is pending!
task: <Task cancelling name='Task-9' coro=<WebSocketCommonProtocol.close_connection() done, defined at /Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py:1263> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py:975, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py:820, shield.<locals>._inner_done_callback() at /opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py:958]>
2025-02-25 17:03:16,031 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-12' coro=<TibberHome.rt_subscribe.<locals>._start() done, defined at /Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py:463> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 2040, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py", line 485, in _start
    callback(data)
    ~~~~~~~~^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py", line 277, in tibber_callback
    self.battery_manager.handle_mode_maintenance()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py", line 118, in handle_mode_maintenance
    current_mode = self.get_current_mode()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py", line 46, in get_current_mode
    mode = self.battery_manager.get_mode()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/battery_manager.py", line 161, in get_mode
    response = client.read_holding_registers(
        address=self.MODE_REGISTER,
        count=1,
        slave=1
    )
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/client/mixin.py", line 114, in read_holding_registers
    return self.execute(no_response_expected, pdu_reg.ReadHoldingRegistersRequest(address=address, count=count, dev_id=slave))
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/client/base.py", line 203, in execute
    return self.transaction.sync_execute(no_response_expected, request)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/transaction/transaction.py", line 108, in sync_execute
    return self.sync_get_response()
           ~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/transaction/transaction.py", line 84, in sync_get_response
    if not (data := self.sync_client.recv(None)):
                    ~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/client/tcp.py", line 253, in recv
    ready = select.select([self.socket], [], [], end - time_)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt
2025-02-25 17:03:16,038 - ERROR - Task was destroyed but it is pending!
task: <Task pending name='Task-20' coro=<<async_generator_athrow without __name__>()> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py:975, Task.task_wakeup()]>>
2025-02-25 17:15:11,631 - INFO - Starting Battery Management System
2025-02-25 17:15:11,631 - INFO - Scheduler service started
2025-02-25 17:15:11,631 - INFO - Starting high usage monitor service
2025-02-25 17:15:11,823 - INFO - Starting high usage monitor
2025-02-25 17:15:11,839 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:15:16,112 - INFO - Successfully connected to battery. Current mode: 6
2025-02-25 17:15:16,114 - INFO - Initializing Tibber connection...
2025-02-25 17:15:16,383 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 17:15:16,479 - INFO - Monitoring home: rdalavgen 149
2025-02-25 17:15:16,479 - INFO - Starting Tibber power monitoring
2025-02-25 17:15:16,479 - INFO - Subscribing to real-time measurements...
2025-02-25 17:15:16,764 - INFO - Successfully subscribed to real-time measurements
2025-02-25 17:15:17,260 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:15:21,184 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:15:25,236 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:15:29,286 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:15:33,048 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:15:47,156 - ERROR - Error in rt_subscribe
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/run_battery_manager.py", line 91, in main
    await run_high_usage_monitor()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/run_battery_manager.py", line 62, in run_high_usage_monitor
    await run_monitor()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py", line 378, in run_monitor
    await tibber_monitor.start_monitoring()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py", line 343, in start_monitoring
    await asyncio.sleep(10)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py", line 718, in sleep
    return await future
           ^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 769, in readexactly
    await self._wait_for_data('readexactly')
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 539, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py", line 479, in _start
    async for _data in self._tibber_control.realtime.sub_manager.session.subscribe(
    ...<14 lines>...
            return
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1475, in subscribe
    async for result in inner_generator:
    ...<13 lines>...
                yield result.data
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1372, in _subscribe
    async for result in inner_generator:
    ...<11 lines>...
        yield result
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 406, in subscribe
    await self._stop_listener(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 212, in _stop_listener
    await self._send_complete_message(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 197, in _send_complete_message
    await self._send(complete_message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 221, in _send
    raise e
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 217, in _send
    await self.websocket.send(message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 916, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: no close frame received or sent
2025-02-25 17:15:47,174 - INFO - Services stopped by user
2025-02-25 17:24:31,680 - INFO - Schedule update attempt 1/3
2025-02-25 17:24:31,692 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:24:35,230 - INFO - Current battery SOC: 58.0%
2025-02-25 17:24:35,245 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:24:38,916 - INFO - Updating schedule at 2025-02-25 17:24:38.915919+01:00 (Current SOC: 58.0%)
2025-02-25 17:24:38,916 - INFO - 
=== Current Schedule ===
2025-02-25 17:24:39,508 - INFO - Checking for future periods to preserve (SOC: 58.0%)
2025-02-25 17:24:39,508 - INFO - No future periods found in current schedule
2025-02-25 17:24:39,509 - INFO - 
=== New Periods for Tomorrow ===
2025-02-25 17:24:39,509 - INFO - Period 1: Charging on Wednesday at 02:00-05:00
2025-02-25 17:24:39,509 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-25 17:24:39,509 - INFO - 
=== Final Schedule ===
2025-02-25 17:24:39,509 - INFO - Period 1: Charging on Wednesday at 02:00-05:00
2025-02-25 17:24:39,509 - INFO - Period 2: Discharging on Wednesday at 07:00-10:00
2025-02-25 17:24:39,522 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 17:24:39,522 - INFO - Attempting to write schedule data: [2, 120, 300, 8, 420, 600, 264, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
2025-02-25 17:24:43,046 - INFO - Successfully wrote schedule to battery
2025-02-25 17:24:43,047 - INFO - Successfully updated battery schedule
2025-02-25 17:24:43,048 - INFO - Schedule update completed successfully
2025-02-25 19:31:39,131 - INFO - Starting Battery Management System
2025-02-25 19:31:39,132 - INFO - Starting high usage monitor service
2025-02-25 19:31:39,132 - INFO - Initializing Tibber connection...
2025-02-25 19:31:39,338 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 19:31:39,398 - INFO - Monitoring home: rdalavgen 149
2025-02-25 19:31:39,399 - INFO - Starting high usage monitor
2025-02-25 19:31:39,403 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:31:39,404 - ERROR - Error reading battery mode: 'BatteryManager' object has no attribute 'MODE_REGISTER'
2025-02-25 19:31:39,404 - WARNING - Could not get battery mode - check battery connection
2025-02-25 19:31:39,404 - INFO - Starting Tibber power monitoring
2025-02-25 19:31:39,404 - INFO - Subscribing to real-time measurements...
2025-02-25 19:31:39,697 - INFO - Successfully subscribed to real-time measurements
2025-02-25 19:32:00,046 - INFO - Services stopped by user
2025-02-25 19:32:00,553 - INFO - Monitoring stopped
2025-02-25 19:32:00,553 - INFO - High usage monitor service stopped
2025-02-25 19:32:10,598 - ERROR - Error in rt_subscribe
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 2002, in _run_once
    event_list = self._selector.select(timeout)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/selectors.py", line 548, in select
    kev_list = self._selector.control(None, max_ev, timeout)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/run_high_usage_monitor.py", line 40, in signal_handler
    sys.exit(0)
    ~~~~~~~~^^^
SystemExit: 0

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 769, in readexactly
    await self._wait_for_data('readexactly')
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 539, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py", line 479, in _start
    async for _data in self._tibber_control.realtime.sub_manager.session.subscribe(
    ...<14 lines>...
            return
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1475, in subscribe
    async for result in inner_generator:
    ...<13 lines>...
                yield result.data
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1372, in _subscribe
    async for result in inner_generator:
    ...<11 lines>...
        yield result
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 406, in subscribe
    await self._stop_listener(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 212, in _stop_listener
    await self._send_complete_message(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 197, in _send_complete_message
    await self._send(complete_message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 221, in _send
    raise e
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 217, in _send
    await self.websocket.send(message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 916, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: no close frame received or sent
2025-02-25 19:32:10,617 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x105f88ec0>
2025-02-25 19:34:39,564 - INFO - Starting Battery Management System
2025-02-25 19:34:39,564 - INFO - Starting high usage monitor service
2025-02-25 19:34:39,564 - INFO - Initializing Tibber connection...
2025-02-25 19:34:39,781 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 19:34:39,873 - INFO - Monitoring home: rdalavgen 149
2025-02-25 19:34:39,874 - INFO - Starting high usage monitor
2025-02-25 19:34:39,879 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:34:44,041 - INFO - Current battery mode: 6
2025-02-25 19:34:44,042 - INFO - Successfully connected to battery. Current mode: 6
2025-02-25 19:34:44,042 - INFO - Starting Tibber power monitoring
2025-02-25 19:34:44,042 - INFO - Subscribing to real-time measurements...
2025-02-25 19:34:46,254 - INFO - Successfully subscribed to real-time measurements
2025-02-25 19:38:26,525 - INFO - Services stopped by user
2025-02-25 19:38:27,033 - INFO - Monitoring stopped
2025-02-25 19:38:27,034 - INFO - High usage monitor service stopped
2025-02-25 19:38:37,082 - ERROR - Error in rt_subscribe
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 2002, in _run_once
    event_list = self._selector.select(timeout)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/selectors.py", line 548, in select
    kev_list = self._selector.control(None, max_ev, timeout)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/run_high_usage_monitor.py", line 40, in signal_handler
    sys.exit(0)
    ~~~~~~~~^^^
SystemExit: 0

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 769, in readexactly
    await self._wait_for_data('readexactly')
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 539, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py", line 479, in _start
    async for _data in self._tibber_control.realtime.sub_manager.session.subscribe(
    ...<14 lines>...
            return
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1475, in subscribe
    async for result in inner_generator:
    ...<13 lines>...
                yield result.data
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1372, in _subscribe
    async for result in inner_generator:
    ...<11 lines>...
        yield result
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 406, in subscribe
    await self._stop_listener(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 212, in _stop_listener
    await self._send_complete_message(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 197, in _send_complete_message
    await self._send(complete_message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 221, in _send
    raise e
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 217, in _send
    await self.websocket.send(message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 916, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: no close frame received or sent
2025-02-25 19:38:37,116 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x102384ec0>
2025-02-25 19:39:37,362 - INFO - Starting Battery Management System
2025-02-25 19:39:37,362 - INFO - Starting high usage monitor service
2025-02-25 19:39:37,362 - INFO - Initializing Tibber connection...
2025-02-25 19:39:37,598 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 19:39:37,658 - INFO - Monitoring home: rdalavgen 149
2025-02-25 19:39:37,659 - INFO - Starting high usage monitor
2025-02-25 19:39:37,664 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:39:41,882 - INFO - Current battery mode: 6
2025-02-25 19:39:41,883 - INFO - Successfully connected to battery. Current mode: 6
2025-02-25 19:39:41,883 - INFO - Starting Tibber power monitoring
2025-02-25 19:39:41,883 - INFO - Subscribing to real-time measurements...
2025-02-25 19:39:42,146 - INFO - Successfully subscribed to real-time measurements
2025-02-25 19:40:04,582 - INFO - Services stopped by user
2025-02-25 19:40:05,090 - INFO - Monitoring stopped
2025-02-25 19:40:05,090 - INFO - High usage monitor service stopped
2025-02-25 19:40:15,112 - ERROR - Error in rt_subscribe
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 2002, in _run_once
    event_list = self._selector.select(timeout)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/selectors.py", line 548, in select
    kev_list = self._selector.control(None, max_ev, timeout)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/run_high_usage_monitor.py", line 40, in signal_handler
    sys.exit(0)
    ~~~~~~~~^^^
SystemExit: 0

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 769, in readexactly
    await self._wait_for_data('readexactly')
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 539, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py", line 479, in _start
    async for _data in self._tibber_control.realtime.sub_manager.session.subscribe(
    ...<14 lines>...
            return
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1475, in subscribe
    async for result in inner_generator:
    ...<13 lines>...
                yield result.data
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1372, in _subscribe
    async for result in inner_generator:
    ...<11 lines>...
        yield result
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 406, in subscribe
    await self._stop_listener(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 212, in _stop_listener
    await self._send_complete_message(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 197, in _send_complete_message
    await self._send(complete_message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 221, in _send
    raise e
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 217, in _send
    await self.websocket.send(message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 916, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: no close frame received or sent
2025-02-25 19:40:15,140 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x106c20ec0>
2025-02-25 19:40:46,404 - INFO - Starting Battery Management System
2025-02-25 19:40:46,404 - INFO - Starting high usage monitor service
2025-02-25 19:40:46,404 - INFO - Initializing Tibber connection...
2025-02-25 19:40:46,581 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 19:40:46,633 - INFO - Monitoring home: rdalavgen 149
2025-02-25 19:40:46,633 - INFO - Starting high usage monitor
2025-02-25 19:40:46,654 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:40:50,592 - INFO - Current battery mode: 6
2025-02-25 19:40:50,593 - INFO - Successfully connected to battery. Current mode: 6
2025-02-25 19:40:50,597 - INFO - Starting Tibber power monitoring
2025-02-25 19:40:50,597 - INFO - Subscribing to real-time measurements...
2025-02-25 19:40:50,859 - INFO - Successfully subscribed to real-time measurements
2025-02-25 19:40:51,058 - INFO - Detected high power usage: 2.59 kW
2025-02-25 19:40:51,058 - INFO - High power usage continues: 2.59 kW (count: 1/10)
2025-02-25 19:40:52,116 - INFO - High power usage continues: 2.59 kW (count: 2/10)
2025-02-25 19:40:52,638 - INFO - High power usage continues: 2.59 kW (count: 3/10)
2025-02-25 19:40:54,063 - INFO - High power usage continues: 2.60 kW (count: 4/10)
2025-02-25 19:40:54,960 - INFO - High power usage continues: 2.60 kW (count: 5/10)
2025-02-25 19:40:56,008 - INFO - High power usage continues: 3.13 kW (count: 6/10)
2025-02-25 19:40:56,911 - INFO - High power usage continues: 3.46 kW (count: 7/10)
2025-02-25 19:40:57,953 - INFO - High power usage continues: 3.46 kW (count: 8/10)
2025-02-25 19:40:58,977 - INFO - High power usage continues: 3.45 kW (count: 9/10)
2025-02-25 19:40:59,860 - INFO - High power usage continues: 3.02 kW (count: 10/10)
2025-02-25 19:40:59,861 - INFO - Sustained high power usage detected: 3.02 kW for 10 seconds
2025-02-25 19:40:59,870 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:03,094 - INFO - Current battery SOC: 56.0%
2025-02-25 19:41:03,095 - INFO - Switching to max self-consumption mode (SOC: 56.0%)
2025-02-25 19:41:03,104 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:06,360 - INFO - Current battery mode: 6
2025-02-25 19:41:06,367 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:06,368 - INFO - Setting battery mode to 4
2025-02-25 19:41:10,239 - ERROR - Exception response 144 / 0
2025-02-25 19:41:10,240 - ERROR - Error writing mode register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-25 19:41:10,241 - ERROR - Error setting battery mode: Error writing mode register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-25 19:41:10,242 - ERROR - Failed to switch to max self-consumption mode
2025-02-25 19:41:10,246 - INFO - Detected high power usage: 2.60 kW
2025-02-25 19:41:10,246 - INFO - High power usage continues: 2.60 kW (count: 1/10)
2025-02-25 19:41:10,246 - INFO - High power usage continues: 2.60 kW (count: 2/10)
2025-02-25 19:41:10,246 - INFO - High power usage continues: 2.60 kW (count: 3/10)
2025-02-25 19:41:10,246 - INFO - High power usage continues: 2.60 kW (count: 4/10)
2025-02-25 19:41:10,246 - INFO - High power usage continues: 2.60 kW (count: 5/10)
2025-02-25 19:41:10,247 - INFO - High power usage continues: 3.12 kW (count: 6/10)
2025-02-25 19:41:10,247 - INFO - High power usage continues: 3.45 kW (count: 7/10)
2025-02-25 19:41:10,247 - INFO - High power usage continues: 3.45 kW (count: 8/10)
2025-02-25 19:41:10,247 - INFO - High power usage continues: 3.45 kW (count: 9/10)
2025-02-25 19:41:10,247 - INFO - High power usage continues: 3.01 kW (count: 10/10)
2025-02-25 19:41:10,247 - INFO - Sustained high power usage detected: 3.01 kW for 10 seconds
2025-02-25 19:41:10,254 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:13,410 - INFO - Current battery SOC: 56.0%
2025-02-25 19:41:13,411 - INFO - Switching to max self-consumption mode (SOC: 56.0%)
2025-02-25 19:41:13,417 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:16,680 - INFO - Current battery mode: 6
2025-02-25 19:41:16,689 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:16,689 - INFO - Setting battery mode to 4
2025-02-25 19:41:19,787 - ERROR - Exception response 144 / 0
2025-02-25 19:41:19,788 - ERROR - Error writing mode register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-25 19:41:19,788 - ERROR - Error setting battery mode: Error writing mode register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-25 19:41:19,789 - ERROR - Failed to switch to max self-consumption mode
2025-02-25 19:41:19,793 - INFO - Detected high power usage: 2.59 kW
2025-02-25 19:41:19,793 - INFO - High power usage continues: 2.59 kW (count: 1/10)
2025-02-25 19:41:19,793 - INFO - High power usage continues: 2.59 kW (count: 2/10)
2025-02-25 19:41:19,794 - INFO - High power usage continues: 2.59 kW (count: 3/10)
2025-02-25 19:41:19,794 - INFO - High power usage continues: 2.59 kW (count: 4/10)
2025-02-25 19:41:19,794 - INFO - High power usage continues: 2.60 kW (count: 5/10)
2025-02-25 19:41:19,794 - INFO - High power usage continues: 3.12 kW (count: 6/10)
2025-02-25 19:41:19,794 - INFO - High power usage continues: 3.45 kW (count: 7/10)
2025-02-25 19:41:19,794 - INFO - High power usage continues: 3.45 kW (count: 8/10)
2025-02-25 19:41:19,794 - INFO - High power usage continues: 3.45 kW (count: 9/10)
2025-02-25 19:41:19,968 - INFO - High power usage continues: 3.02 kW (count: 10/10)
2025-02-25 19:41:19,969 - INFO - Sustained high power usage detected: 3.02 kW for 10 seconds
2025-02-25 19:41:19,978 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:23,035 - INFO - Current battery SOC: 56.0%
2025-02-25 19:41:23,036 - INFO - Switching to max self-consumption mode (SOC: 56.0%)
2025-02-25 19:41:23,047 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:26,418 - INFO - Current battery mode: 6
2025-02-25 19:41:26,426 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:26,427 - INFO - Setting battery mode to 4
2025-02-25 19:41:30,715 - ERROR - Exception response 144 / 0
2025-02-25 19:41:30,716 - ERROR - Error writing mode register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-25 19:41:30,716 - ERROR - Error setting battery mode: Error writing mode register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-25 19:41:30,716 - ERROR - Failed to switch to max self-consumption mode
2025-02-25 19:41:30,720 - INFO - Detected high power usage: 2.60 kW
2025-02-25 19:41:30,720 - INFO - High power usage continues: 2.60 kW (count: 1/10)
2025-02-25 19:41:30,721 - INFO - High power usage continues: 2.59 kW (count: 2/10)
2025-02-25 19:41:30,721 - INFO - High power usage continues: 2.59 kW (count: 3/10)
2025-02-25 19:41:30,721 - INFO - High power usage continues: 2.59 kW (count: 4/10)
2025-02-25 19:41:30,721 - INFO - High power usage continues: 2.59 kW (count: 5/10)
2025-02-25 19:41:30,721 - INFO - High power usage continues: 3.11 kW (count: 6/10)
2025-02-25 19:41:30,721 - INFO - High power usage continues: 3.45 kW (count: 7/10)
2025-02-25 19:41:30,721 - INFO - High power usage continues: 3.45 kW (count: 8/10)
2025-02-25 19:41:30,721 - INFO - High power usage continues: 3.44 kW (count: 9/10)
2025-02-25 19:41:30,722 - INFO - High power usage continues: 3.01 kW (count: 10/10)
2025-02-25 19:41:30,722 - INFO - Sustained high power usage detected: 3.01 kW for 10 seconds
2025-02-25 19:41:30,727 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:33,853 - INFO - Current battery SOC: 56.0%
2025-02-25 19:41:33,854 - INFO - Switching to max self-consumption mode (SOC: 56.0%)
2025-02-25 19:41:33,865 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:37,375 - INFO - Current battery mode: 6
2025-02-25 19:41:37,385 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:37,385 - INFO - Setting battery mode to 4
2025-02-25 19:41:40,551 - ERROR - Exception response 144 / 0
2025-02-25 19:41:40,552 - ERROR - Error writing mode register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-25 19:41:40,552 - ERROR - Error setting battery mode: Error writing mode register: ExceptionResponse(dev_id=1, transaction_id=1, address=0, count=0, bits=[], registers=[], status=1)
2025-02-25 19:41:40,553 - ERROR - Failed to switch to max self-consumption mode
2025-02-25 19:41:40,557 - INFO - Detected high power usage: 2.59 kW
2025-02-25 19:41:40,557 - INFO - High power usage continues: 2.59 kW (count: 1/10)
2025-02-25 19:41:40,557 - INFO - High power usage continues: 2.58 kW (count: 2/10)
2025-02-25 19:41:40,558 - INFO - High power usage continues: 2.57 kW (count: 3/10)
2025-02-25 19:41:40,558 - INFO - High power usage continues: 2.56 kW (count: 4/10)
2025-02-25 19:41:40,558 - INFO - High power usage continues: 2.55 kW (count: 5/10)
2025-02-25 19:41:40,559 - INFO - High power usage continues: 3.08 kW (count: 6/10)
2025-02-25 19:41:40,559 - INFO - High power usage continues: 3.40 kW (count: 7/10)
2025-02-25 19:41:40,559 - INFO - High power usage continues: 3.40 kW (count: 8/10)
2025-02-25 19:41:40,559 - INFO - High power usage continues: 3.39 kW (count: 9/10)
2025-02-25 19:41:40,559 - INFO - High power usage continues: 2.95 kW (count: 10/10)
2025-02-25 19:41:40,559 - INFO - Sustained high power usage detected: 2.95 kW for 10 seconds
2025-02-25 19:41:40,564 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:44,025 - INFO - Current battery SOC: 56.0%
2025-02-25 19:41:44,026 - INFO - Switching to max self-consumption mode (SOC: 56.0%)
2025-02-25 19:41:44,032 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:47,928 - INFO - Current battery mode: 6
2025-02-25 19:41:47,944 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 19:41:47,944 - INFO - Setting battery mode to 4
2025-02-25 19:41:49,789 - INFO - Services stopped by user
2025-02-25 19:41:50,296 - INFO - Monitoring stopped
2025-02-25 19:41:50,297 - INFO - High usage monitor service stopped
2025-02-25 19:42:00,344 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-13' coro=<<async_generator_athrow without __name__>()> exception=ConnectionClosedError(None, None, None)>
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 2040, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py", line 485, in _start
    callback(data)
    ~~~~~~~~^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py", line 210, in tibber_callback
    self.battery_mode_manager.switch_to_max_self_consumption(soc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py", line 65, in switch_to_max_self_consumption
    success = self.battery_manager.set_mode(MAX_SELF_CONSUMPTION_MODE)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/battery_manager.py", line 200, in set_mode
    response = client.write_registers(
        address=self.MODE_REGISTER,
        values=[mode],
        slave=1
    )
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/client/mixin.py", line 514, in write_registers
    return self.execute(no_response_expected, pdu_reg.WriteMultipleRegistersRequest(address=address, registers=values,dev_id=slave))
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/client/base.py", line 203, in execute
    return self.transaction.sync_execute(no_response_expected, request)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/transaction/transaction.py", line 108, in sync_execute
    return self.sync_get_response()
           ~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/transaction/transaction.py", line 84, in sync_get_response
    if not (data := self.sync_client.recv(None)):
                    ~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/client/tcp.py", line 253, in recv
    ready = select.select([self.socket], [], [], end - time_)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/run_high_usage_monitor.py", line 40, in signal_handler
    sys.exit(0)
    ~~~~~~~~^^^
SystemExit: 0

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 769, in readexactly
    await self._wait_for_data('readexactly')
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 539, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1491, in subscribe
    await inner_generator.aclose()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1387, in _subscribe
    await inner_generator.aclose()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 406, in subscribe
    await self._stop_listener(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 212, in _stop_listener
    await self._send_complete_message(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 197, in _send_complete_message
    await self._send(complete_message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 221, in _send
    raise e
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 217, in _send
    await self.websocket.send(message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 916, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: no close frame received or sent
2025-02-25 19:42:00,375 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x104580ec0>
2025-02-25 19:42:00,375 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-12' coro=<TibberHome.rt_subscribe.<locals>._start() done, defined at /Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py:463> exception=SystemExit(0)>
Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/run_high_usage_monitor.py", line 49, in <module>
    exit_code = asyncio.run(main())
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 2040, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py", line 485, in _start
    callback(data)
    ~~~~~~~~^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py", line 210, in tibber_callback
    self.battery_mode_manager.switch_to_max_self_consumption(soc)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/high_usage_monitor.py", line 65, in switch_to_max_self_consumption
    success = self.battery_manager.set_mode(MAX_SELF_CONSUMPTION_MODE)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/battery_manager.py", line 200, in set_mode
    response = client.write_registers(
        address=self.MODE_REGISTER,
        values=[mode],
        slave=1
    )
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/client/mixin.py", line 514, in write_registers
    return self.execute(no_response_expected, pdu_reg.WriteMultipleRegistersRequest(address=address, registers=values,dev_id=slave))
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/client/base.py", line 203, in execute
    return self.transaction.sync_execute(no_response_expected, request)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/transaction/transaction.py", line 108, in sync_execute
    return self.sync_get_response()
           ~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/transaction/transaction.py", line 84, in sync_get_response
    if not (data := self.sync_client.recv(None)):
                    ~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/pymodbus/client/tcp.py", line 253, in recv
    ready = select.select([self.socket], [], [], end - time_)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/run_high_usage_monitor.py", line 40, in signal_handler
    sys.exit(0)
    ~~~~~~~~^^^
SystemExit: 0
2025-02-25 20:10:27,401 - INFO - Starting Battery Management System
2025-02-25 20:10:27,401 - INFO - Starting high usage monitor service
2025-02-25 20:10:27,401 - INFO - Initializing Tibber connection...
2025-02-25 20:10:27,595 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 20:10:27,667 - INFO - Monitoring home: rdalavgen 149
2025-02-25 20:10:27,667 - INFO - Starting high usage monitor
2025-02-25 20:10:27,672 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 20:10:31,109 - INFO - Current battery mode: 5
2025-02-25 20:10:31,111 - INFO - Successfully connected to battery. Current mode: 5
2025-02-25 20:10:31,111 - INFO - Starting Tibber power monitoring
2025-02-25 20:10:31,111 - INFO - Subscribing to real-time measurements...
2025-02-25 20:10:31,375 - INFO - Successfully subscribed to real-time measurements
2025-02-25 20:10:33,133 - INFO - Detected high power usage: 2.00 kW
2025-02-25 20:10:33,133 - INFO - High power usage continues: 2.00 kW (count: 1/10)
2025-02-25 20:10:34,124 - INFO - High power usage continues: 2.00 kW (count: 2/10)
2025-02-25 20:10:35,104 - INFO - High power usage continues: 2.13 kW (count: 3/10)
2025-02-25 20:10:36,080 - INFO - High power usage continues: 2.85 kW (count: 4/10)
2025-02-25 20:10:37,154 - INFO - High power usage continues: 2.85 kW (count: 5/10)
2025-02-25 20:10:38,084 - INFO - High power usage continues: 2.85 kW (count: 6/10)
2025-02-25 20:10:39,014 - INFO - High power usage continues: 2.86 kW (count: 7/10)
2025-02-25 20:10:40,022 - INFO - High power usage continues: 2.20 kW (count: 8/10)
2025-02-25 20:10:41,019 - INFO - Power usage returned to normal: 1.99 kW
2025-02-25 20:10:44,948 - INFO - Detected high power usage: 2.13 kW
2025-02-25 20:10:44,948 - INFO - High power usage continues: 2.13 kW (count: 1/10)
2025-02-25 20:10:46,060 - INFO - High power usage continues: 2.84 kW (count: 2/10)
2025-02-25 20:10:46,984 - INFO - High power usage continues: 2.84 kW (count: 3/10)
2025-02-25 20:10:47,919 - INFO - High power usage continues: 2.80 kW (count: 4/10)
2025-02-25 20:10:48,929 - INFO - High power usage continues: 2.81 kW (count: 5/10)
2025-02-25 20:10:49,951 - INFO - High power usage continues: 2.18 kW (count: 6/10)
2025-02-25 20:10:50,976 - INFO - Power usage returned to normal: 1.96 kW
2025-02-25 20:10:54,971 - INFO - Detected high power usage: 2.10 kW
2025-02-25 20:10:54,972 - INFO - High power usage continues: 2.10 kW (count: 1/10)
2025-02-25 20:10:55,891 - INFO - High power usage continues: 2.82 kW (count: 2/10)
2025-02-25 20:10:56,816 - INFO - High power usage continues: 2.81 kW (count: 3/10)
2025-02-25 20:10:57,839 - INFO - High power usage continues: 2.81 kW (count: 4/10)
2025-02-25 20:10:58,863 - INFO - High power usage continues: 2.80 kW (count: 5/10)
2025-02-25 20:11:00,472 - INFO - High power usage continues: 2.17 kW (count: 6/10)
2025-02-25 20:11:01,318 - INFO - Power usage returned to normal: 1.96 kW
2025-02-25 20:11:04,717 - INFO - Detected high power usage: 2.17 kW
2025-02-25 20:11:04,718 - INFO - High power usage continues: 2.17 kW (count: 1/10)
2025-02-25 20:11:05,725 - INFO - High power usage continues: 2.81 kW (count: 2/10)
2025-02-25 20:11:07,259 - INFO - High power usage continues: 2.81 kW (count: 3/10)
2025-02-25 20:11:08,280 - INFO - High power usage continues: 2.81 kW (count: 4/10)
2025-02-25 20:11:09,203 - INFO - High power usage continues: 2.81 kW (count: 5/10)
2025-02-25 20:11:10,128 - INFO - High power usage continues: 2.17 kW (count: 6/10)
2025-02-25 20:11:11,155 - INFO - Power usage returned to normal: 1.96 kW
2025-02-25 20:11:14,496 - INFO - Detected high power usage: 2.17 kW
2025-02-25 20:11:14,497 - INFO - High power usage continues: 2.17 kW (count: 1/10)
2025-02-25 20:11:15,554 - INFO - High power usage continues: 2.81 kW (count: 2/10)
2025-02-25 20:11:16,940 - INFO - High power usage continues: 2.81 kW (count: 3/10)
2025-02-25 20:11:18,010 - INFO - High power usage continues: 2.81 kW (count: 4/10)
2025-02-25 20:11:18,987 - INFO - High power usage continues: 2.81 kW (count: 5/10)
2025-02-25 20:11:19,964 - INFO - High power usage continues: 2.17 kW (count: 6/10)
2025-02-25 20:11:21,085 - INFO - Power usage returned to normal: 1.96 kW
2025-02-25 20:11:24,998 - INFO - Detected high power usage: 2.18 kW
2025-02-25 20:11:24,999 - INFO - High power usage continues: 2.18 kW (count: 1/10)
2025-02-25 20:11:26,001 - INFO - High power usage continues: 2.81 kW (count: 2/10)
2025-02-25 20:11:27,022 - INFO - High power usage continues: 2.81 kW (count: 3/10)
2025-02-25 20:11:27,950 - INFO - High power usage continues: 2.81 kW (count: 4/10)
2025-02-25 20:11:28,870 - INFO - High power usage continues: 2.81 kW (count: 5/10)
2025-02-25 20:11:29,870 - INFO - High power usage continues: 2.18 kW (count: 6/10)
2025-02-25 20:11:30,919 - INFO - Power usage returned to normal: 1.97 kW
2025-02-25 20:11:31,900 - INFO - Detected high power usage: 2.00 kW
2025-02-25 20:11:31,900 - INFO - High power usage continues: 2.00 kW (count: 1/10)
2025-02-25 20:11:34,041 - INFO - High power usage continues: 2.02 kW (count: 2/10)
2025-02-25 20:11:34,447 - INFO - High power usage continues: 2.01 kW (count: 3/10)
2025-02-25 20:11:34,804 - INFO - High power usage continues: 2.37 kW (count: 4/10)
2025-02-25 20:11:35,931 - INFO - High power usage continues: 3.09 kW (count: 5/10)
2025-02-25 20:11:36,759 - INFO - High power usage continues: 4.20 kW (count: 6/10)
2025-02-25 20:11:38,182 - INFO - High power usage continues: 4.20 kW (count: 7/10)
2025-02-25 20:11:39,209 - INFO - High power usage continues: 4.20 kW (count: 8/10)
2025-02-25 20:11:40,190 - INFO - High power usage continues: 3.54 kW (count: 9/10)
2025-02-25 20:11:41,157 - INFO - High power usage continues: 3.34 kW (count: 10/10)
2025-02-25 20:11:41,158 - INFO - Sustained high power usage detected: 3.34 kW for 10 seconds
2025-02-25 20:11:41,164 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 20:11:45,170 - INFO - Current battery SOC: 55.0%
2025-02-25 20:11:45,172 - INFO - Switching to max self-consumption mode (SOC: 55.0%)
2025-02-25 20:11:45,182 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 20:11:49,041 - INFO - Current battery mode: 5
2025-02-25 20:11:49,059 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 20:11:49,060 - INFO - Setting battery mode to 2
2025-02-25 20:11:52,824 - INFO - Successfully set battery mode to 2
2025-02-25 20:11:52,826 - INFO - Successfully switched to max self-consumption mode
2025-02-25 20:21:52,925 - INFO - Maximum self-consumption duration reached (600 seconds)
2025-02-25 20:21:52,926 - INFO - Switching back to TOU mode
2025-02-25 20:21:52,933 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 20:21:52,934 - INFO - Setting battery mode to 5
2025-02-25 20:21:56,780 - INFO - Successfully set battery mode to 5
2025-02-25 20:21:56,784 - INFO - Successfully switched back to TOU mode
2025-02-25 20:22:05,692 - INFO - Detected high power usage: 2.19 kW
2025-02-25 20:22:05,692 - INFO - High power usage continues: 2.19 kW (count: 1/10)
2025-02-25 20:22:07,112 - INFO - High power usage continues: 2.19 kW (count: 2/10)
2025-02-25 20:22:08,106 - INFO - High power usage continues: 2.19 kW (count: 3/10)
2025-02-25 20:22:09,174 - INFO - High power usage continues: 2.19 kW (count: 4/10)
2025-02-25 20:22:10,094 - INFO - Power usage returned to normal: 1.40 kW
2025-02-25 20:22:16,034 - INFO - Detected high power usage: 2.19 kW
2025-02-25 20:22:16,035 - INFO - High power usage continues: 2.19 kW (count: 1/10)
2025-02-25 20:22:16,907 - INFO - High power usage continues: 2.20 kW (count: 2/10)
2025-02-25 20:22:17,980 - INFO - High power usage continues: 2.19 kW (count: 3/10)
2025-02-25 20:22:18,866 - INFO - High power usage continues: 2.19 kW (count: 4/10)
2025-02-25 20:22:19,936 - INFO - Power usage returned to normal: 1.40 kW
2025-02-25 20:22:25,766 - INFO - Detected high power usage: 2.19 kW
2025-02-25 20:22:25,766 - INFO - High power usage continues: 2.19 kW (count: 1/10)
2025-02-25 20:22:26,728 - INFO - High power usage continues: 2.19 kW (count: 2/10)
2025-02-25 20:22:27,822 - INFO - High power usage continues: 2.19 kW (count: 3/10)
2025-02-25 20:22:28,683 - INFO - High power usage continues: 2.18 kW (count: 4/10)
2025-02-25 20:22:29,664 - INFO - Power usage returned to normal: 1.39 kW
2025-02-25 20:22:35,593 - INFO - Detected high power usage: 2.19 kW
2025-02-25 20:22:35,593 - INFO - High power usage continues: 2.19 kW (count: 1/10)
2025-02-25 20:22:36,615 - INFO - High power usage continues: 2.19 kW (count: 2/10)
2025-02-25 20:22:37,537 - INFO - High power usage continues: 2.19 kW (count: 3/10)
2025-02-25 20:22:37,936 - INFO - Services stopped by user
2025-02-25 20:22:38,443 - INFO - Monitoring stopped
2025-02-25 20:22:38,443 - INFO - High usage monitor service stopped
2025-02-25 20:22:48,491 - ERROR - Error in rt_subscribe
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 2002, in _run_once
    event_list = self._selector.select(timeout)
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/selectors.py", line 548, in select
    kev_list = self._selector.control(None, max_ev, timeout)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/run_high_usage_monitor.py", line 40, in signal_handler
    sys.exit(0)
    ~~~~~~~~^^^
SystemExit: 0

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 769, in readexactly
    await self._wait_for_data('readexactly')
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 539, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py", line 479, in _start
    async for _data in self._tibber_control.realtime.sub_manager.session.subscribe(
    ...<14 lines>...
            return
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1475, in subscribe
    async for result in inner_generator:
    ...<13 lines>...
                yield result.data
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1372, in _subscribe
    async for result in inner_generator:
    ...<11 lines>...
        yield result
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 406, in subscribe
    await self._stop_listener(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 212, in _stop_listener
    await self._send_complete_message(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 197, in _send_complete_message
    await self._send(complete_message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 221, in _send
    raise e
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 217, in _send
    await self.websocket.send(message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 916, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: no close frame received or sent
2025-02-25 20:22:48,527 - ERROR - Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x102798ec0>
2025-02-25 21:11:37,069 - INFO - Starting Battery Management System
2025-02-25 21:11:37,069 - INFO - Starting high usage monitor service
2025-02-25 21:11:37,274 - INFO - Initializing Tibber connection...
2025-02-25 21:11:37,515 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 21:11:37,585 - INFO - Monitoring home: rdalavgen 149
2025-02-25 21:11:37,585 - INFO - Starting monitoring loop
2025-02-25 21:11:37,585 - INFO - Starting high usage monitor
2025-02-25 21:11:37,596 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 21:11:41,556 - INFO - Current battery mode: 5
2025-02-25 21:11:41,557 - INFO - Successfully connected to battery. Current mode: 5
2025-02-25 21:11:41,557 - INFO - Starting Tibber power monitoring
2025-02-25 21:11:41,557 - INFO - Subscribing to real-time measurements...
2025-02-25 21:11:41,821 - INFO - Successfully subscribed to real-time measurements
2025-02-25 21:11:52,768 - INFO - Shutdown signal received
2025-02-25 21:11:52,942 - INFO - Shutting down gracefully...
2025-02-25 21:11:52,943 - INFO - Cancelling monitor task
2025-02-25 21:11:52,944 - INFO - Monitoring loop cancelled
2025-02-25 21:11:52,944 - INFO - Real-time subscription cancelled
2025-02-25 21:11:52,944 - INFO - Monitoring stopped
2025-02-25 21:11:52,944 - INFO - Monitor task cancelled
2025-02-25 21:11:52,945 - WARNING - Monitor task cancellation timed out
2025-02-25 21:11:52,945 - INFO - Closing Tibber real-time subscription
2025-02-25 21:11:52,945 - INFO - Closing Tibber connection
2025-02-25 21:11:52,945 - INFO - Shutdown complete
2025-02-25 21:12:02,994 - ERROR - Error in rt_subscribe
Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1279, in close_connection
    await self.transfer_data_task
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 769, in readexactly
    await self._wait_for_data('readexactly')
  File "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/streams.py", line 539, in _wait_for_data
    await self._waiter
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/tibber/home.py", line 479, in _start
    async for _data in self._tibber_control.realtime.sub_manager.session.subscribe(
    ...<14 lines>...
            return
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1475, in subscribe
    async for result in inner_generator:
    ...<13 lines>...
                yield result.data
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/client.py", line 1372, in _subscribe
    async for result in inner_generator:
    ...<11 lines>...
        yield result
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 406, in subscribe
    await self._stop_listener(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 212, in _stop_listener
    await self._send_complete_message(query_id)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets.py", line 197, in _send_complete_message
    await self._send(complete_message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 221, in _send
    raise e
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/gql/transport/websockets_base.py", line 217, in _send
    await self.websocket.send(message)
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 620, in send
    await self.ensure_open()
  File "/Users/minamarcus/Programming/Luna2000-Battery-Control/env/lib/python3.13/site-packages/websockets/legacy/protocol.py", line 916, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedError: no close frame received or sent
2025-02-25 21:23:30,808 - INFO - Starting Battery Management System
2025-02-25 21:23:30,808 - INFO - Starting high usage monitor service
2025-02-25 21:23:30,867 - INFO - Initializing Tibber connection...
2025-02-25 21:23:30,868 - INFO - Initializing Tibber connection...
2025-02-25 21:23:31,154 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 21:23:31,215 - INFO - Monitoring home: rdalavgen 149
2025-02-25 21:23:31,216 - INFO - Starting monitoring...
2025-02-25 21:23:31,216 - INFO - Starting high usage monitor
2025-02-25 21:23:31,221 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 21:23:34,364 - INFO - Current battery mode: 5
2025-02-25 21:23:34,367 - INFO - Successfully connected to battery. Current mode: 5
2025-02-25 21:23:34,367 - INFO - Starting Tibber power monitoring
2025-02-25 21:23:34,367 - INFO - Subscribing to real-time measurements...
2025-02-25 21:23:34,699 - INFO - Successfully subscribed to real-time measurements
2025-02-25 21:23:59,467 - INFO - Shutdown signal received
2025-02-25 21:23:59,808 - INFO - Monitoring loop cancelled
2025-02-25 21:23:59,809 - INFO - Monitoring stopped
2025-02-25 21:23:59,809 - INFO - Cleaning up resources...
2025-02-25 21:23:59,809 - INFO - Stopping monitor...
2025-02-25 21:23:59,809 - INFO - Stopping high usage monitor
2025-02-25 21:23:59,809 - INFO - Closing aiohttp session...
2025-02-25 21:23:59,810 - INFO - Running 2 cleanup tasks...
2025-02-25 21:23:59,810 - INFO - Cleaning up high usage monitor resources
2025-02-25 21:23:59,811 - INFO - Cleanup tasks completed
2025-02-25 21:23:59,811 - INFO - Resource cleanup complete
2025-02-25 21:26:17,178 - INFO - Starting Battery Management System
2025-02-25 21:26:17,179 - INFO - Starting high usage monitor service
2025-02-25 21:26:17,200 - INFO - Initializing Tibber connection...
2025-02-25 21:26:17,200 - INFO - Initializing Tibber connection...
2025-02-25 21:26:17,407 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 21:26:17,473 - INFO - Monitoring home: rdalavgen 149
2025-02-25 21:26:17,473 - INFO - Starting monitoring...
2025-02-25 21:26:17,473 - INFO - Starting high usage monitor
2025-02-25 21:26:17,479 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 21:26:20,628 - INFO - Current battery mode: 5
2025-02-25 21:26:20,630 - INFO - Successfully connected to battery. Current mode: 5
2025-02-25 21:26:20,630 - INFO - Starting Tibber power monitoring
2025-02-25 21:26:20,630 - INFO - Subscribing to real-time measurements...
2025-02-25 21:26:20,942 - INFO - Successfully subscribed to real-time measurements
2025-02-25 21:26:25,901 - INFO - Detected high power usage: 2.18 kW
2025-02-25 21:26:25,901 - INFO - High power usage continues: 2.18 kW (count: 1/10)
2025-02-25 21:26:26,877 - INFO - High power usage continues: 2.17 kW (count: 2/10)
2025-02-25 21:26:27,908 - INFO - High power usage continues: 2.17 kW (count: 3/10)
2025-02-25 21:26:28,350 - INFO - High power usage continues: 2.08 kW (count: 4/10)
2025-02-25 21:26:29,859 - INFO - Power usage returned to normal: 1.36 kW
2025-02-25 21:26:34,737 - INFO - Detected high power usage: 2.02 kW
2025-02-25 21:26:34,738 - INFO - High power usage continues: 2.02 kW (count: 1/10)
2025-02-25 21:26:35,710 - INFO - High power usage continues: 2.17 kW (count: 2/10)
2025-02-25 21:26:36,688 - INFO - High power usage continues: 2.18 kW (count: 3/10)
2025-02-25 21:26:37,670 - INFO - High power usage continues: 2.18 kW (count: 4/10)
2025-02-25 21:26:38,652 - INFO - High power usage continues: 2.10 kW (count: 5/10)
2025-02-25 21:26:39,637 - INFO - Power usage returned to normal: 1.38 kW
2025-02-25 21:31:33,749 - INFO - Shutdown signal received
2025-02-25 21:31:34,404 - INFO - Monitoring loop cancelled
2025-02-25 21:31:34,405 - INFO - Monitoring stopped
2025-02-25 21:31:34,405 - INFO - Cleaning up resources...
2025-02-25 21:31:34,405 - INFO - Stopping monitor...
2025-02-25 21:31:34,405 - INFO - Stopping high usage monitor
2025-02-25 21:31:34,405 - INFO - Closing aiohttp session...
2025-02-25 21:31:34,406 - INFO - Running 2 cleanup tasks...
2025-02-25 21:31:34,407 - INFO - Cleaning up high usage monitor resources
2025-02-25 21:31:34,407 - INFO - Cleanup tasks completed
2025-02-25 21:31:34,407 - INFO - Resource cleanup complete
2025-02-25 21:31:54,203 - INFO - Starting Battery Management System
2025-02-25 21:31:54,203 - INFO - Starting high usage monitor service
2025-02-25 21:31:54,221 - INFO - Initializing Tibber connection...
2025-02-25 21:31:54,221 - INFO - Initializing Tibber connection...
2025-02-25 21:31:54,423 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 21:31:54,493 - INFO - Monitoring home: rdalavgen 149
2025-02-25 21:31:54,493 - INFO - Starting monitoring...
2025-02-25 21:31:54,493 - INFO - Starting high usage monitor
2025-02-25 21:31:54,499 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 21:31:58,253 - INFO - Current battery mode: 5
2025-02-25 21:31:58,255 - INFO - Successfully connected to battery. Current mode: 5
2025-02-25 21:31:58,255 - INFO - Starting Tibber power monitoring
2025-02-25 21:31:58,255 - INFO - Subscribing to real-time measurements...
2025-02-25 21:31:58,537 - INFO - Successfully subscribed to real-time measurements
2025-02-25 21:32:02,662 - INFO - Detected high power usage: 1.71 kW
2025-02-25 21:32:02,662 - INFO - High power usage continues: 1.71 kW (count: 1/10)
2025-02-25 21:32:12,887 - INFO - High power usage continues: 1.72 kW (count: 2/10)
2025-02-25 21:32:23,333 - INFO - High power usage continues: 1.71 kW (count: 3/10)
2025-02-25 21:32:32,616 - INFO - High power usage continues: 1.72 kW (count: 4/10)
2025-02-25 21:32:42,854 - INFO - High power usage continues: 1.74 kW (count: 5/10)
2025-02-25 21:32:52,664 - INFO - High power usage continues: 1.75 kW (count: 6/10)
2025-02-25 21:33:02,951 - INFO - High power usage continues: 1.74 kW (count: 7/10)
2025-02-25 21:33:12,744 - INFO - High power usage continues: 1.75 kW (count: 8/10)
2025-02-25 21:33:22,583 - INFO - High power usage continues: 1.76 kW (count: 9/10)
2025-02-25 21:33:32,892 - INFO - High power usage continues: 1.75 kW (count: 10/10)
2025-02-25 21:33:32,892 - INFO - Sustained high power usage detected: 1.75 kW for 10 seconds
2025-02-25 21:33:32,901 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 21:33:36,571 - INFO - Current battery SOC: 51.0%
2025-02-25 21:33:36,572 - INFO - Switching to max self-consumption mode (SOC: 51.0%)
2025-02-25 21:33:36,578 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 21:33:39,756 - INFO - Current battery mode: 5
2025-02-25 21:33:39,766 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 21:33:39,766 - INFO - Setting battery mode to 2
2025-02-25 21:33:43,332 - INFO - Successfully set battery mode to 2
2025-02-25 21:33:43,333 - INFO - Successfully switched to max self-consumption mode
2025-02-25 21:34:43,344 - INFO - Maximum self-consumption duration reached (60 seconds)
2025-02-25 21:34:43,346 - INFO - Switching back to TOU mode
2025-02-25 21:34:43,369 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 21:34:43,370 - INFO - Setting battery mode to 5
2025-02-25 21:34:46,501 - INFO - Successfully set battery mode to 5
2025-02-25 21:34:46,502 - INFO - Successfully switched back to TOU mode
2025-02-25 21:35:02,663 - INFO - Detected high power usage: 1.81 kW
2025-02-25 21:35:02,664 - INFO - High power usage continues: 1.81 kW (count: 1/10)
2025-02-25 21:35:12,507 - INFO - High power usage continues: 1.81 kW (count: 2/10)
2025-02-25 21:35:22,788 - INFO - High power usage continues: 1.81 kW (count: 3/10)
2025-02-25 21:35:31,480 - INFO - Shutdown signal received
2025-02-25 21:35:31,522 - INFO - Monitoring loop cancelled
2025-02-25 21:35:31,523 - INFO - Monitoring stopped
2025-02-25 21:35:31,523 - INFO - Cleaning up resources...
2025-02-25 21:35:31,524 - INFO - Stopping monitor...
2025-02-25 21:35:31,525 - INFO - Stopping high usage monitor
2025-02-25 21:35:31,525 - INFO - Closing aiohttp session...
2025-02-25 21:35:31,526 - INFO - Running 2 cleanup tasks...
2025-02-25 21:35:31,527 - INFO - Cleaning up high usage monitor resources
2025-02-25 21:35:31,528 - INFO - Cleanup tasks completed
2025-02-25 21:35:31,529 - INFO - Resource cleanup complete
2025-02-25 21:41:16,723 - INFO - Starting Battery Management System
2025-02-25 21:41:16,723 - INFO - Starting high usage monitor service
2025-02-25 21:41:16,743 - INFO - Initializing Tibber connection...
2025-02-25 21:41:16,743 - INFO - Initializing Tibber connection...
2025-02-25 21:41:16,951 - INFO - Connected to Tibber as: Mina Marcus
2025-02-25 21:41:17,026 - INFO - Monitoring home: rdalavgen 149
2025-02-25 21:41:17,027 - INFO - Starting monitoring...
2025-02-25 21:41:17,027 - INFO - Starting high usage monitor
2025-02-25 21:41:17,036 - INFO - Successfully connected to battery at 192.168.20.194:502
2025-02-25 21:41:20,375 - INFO - Current battery mode: 5
2025-02-25 21:41:20,376 - INFO - Successfully connected to battery. Current mode: 5
2025-02-25 21:41:20,376 - INFO - Starting Tibber power monitoring
2025-02-25 21:41:20,376 - INFO - Subscribing to real-time measurements...
2025-02-25 21:41:20,628 - INFO - Successfully subscribed to real-time measurements
2025-02-25 21:41:21,756 - INFO - Power usage: 2.01 kW
2025-02-25 21:41:22,720 - INFO - Power usage: 2.01 kW
2025-02-25 21:41:23,679 - INFO - Power usage: 2.00 kW
2025-02-25 21:41:24,662 - INFO - Power usage: 2.65 kW
2025-02-25 21:41:25,638 - INFO - Power usage: 2.83 kW
2025-02-25 21:41:26,609 - INFO - Power usage: 2.83 kW
2025-02-25 21:41:27,593 - INFO - Power usage: 2.83 kW
2025-02-25 21:41:28,582 - INFO - Power usage: 2.60 kW
2025-02-25 21:41:29,559 - INFO - Power usage: 2.01 kW
2025-02-25 21:41:30,546 - INFO - Power usage: 2.01 kW
2025-02-25 21:41:31,557 - INFO - Power usage: 2.01 kW
2025-02-25 21:41:32,534 - INFO - Power usage: 2.01 kW
2025-02-25 21:41:33,505 - INFO - Power usage: 2.01 kW
2025-02-25 21:41:34,950 - INFO - Power usage: 2.65 kW
2025-02-25 21:41:35,932 - INFO - Power usage: 2.83 kW
2025-02-25 21:41:36,924 - INFO - Power usage: 2.83 kW
2025-02-25 21:41:37,894 - INFO - Power usage: 2.84 kW
2025-02-25 21:41:38,873 - INFO - Power usage: 2.62 kW
2025-02-25 21:41:39,595 - INFO - Shutdown signal received
2025-02-25 21:41:39,867 - INFO - Monitoring loop cancelled
2025-02-25 21:41:39,868 - INFO - Monitoring stopped
2025-02-25 21:41:39,869 - INFO - Cleaning up resources...
2025-02-25 21:41:39,869 - INFO - Stopping monitor...
2025-02-25 21:41:39,869 - INFO - Stopping high usage monitor
2025-02-25 21:41:39,869 - INFO - Closing aiohttp session...
2025-02-25 21:41:39,869 - INFO - Running 2 cleanup tasks...
2025-02-25 21:41:39,872 - INFO - Cleaning up high usage monitor resources
2025-02-25 21:41:39,872 - INFO - Cleanup tasks completed
2025-02-25 21:41:39,872 - INFO - Resource cleanup complete
